<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MPX Programmers Manual: src/mpx_util.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>src/mpx_util.h File Reference</h1>  </div>
</div>
<div class="contents">

<p><a href="mpx__util_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpx__util_8h.html#a9e59881f10bd91d7255f18f205e101e6">mpx_pager</a> (char *line_to_print)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The pager function permits displaying output screen-full at a time.  <a href="#a9e59881f10bd91d7255f18f205e101e6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpx__util_8h.html#a60afdb7496b6ff469c6b98d2ecde15ed">mpx_pager_init</a> (char *header)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The pager initialization function must be used before the pager function.  <a href="#a60afdb7496b6ff469c6b98d2ecde15ed"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpx__util_8h.html#a8cf3281978ba1652fd5d643e1a41f70b">mpx_cls</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Clear, blanks the screen.  <a href="#a8cf3281978ba1652fd5d643e1a41f70b"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpx__util_8h.html#a8e31250a20e8bc8e7106f5a37c391199">mpxprompt_yn</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The function Prompt y n prompts the user to answer a Yes or No question.  <a href="#a8e31250a20e8bc8e7106f5a37c391199"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpx__util_8h.html#a781169ab05ad54c0d37253d73060b77f">mpx_readline</a> (char *buffer, int buflen)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Readline function reads in a line from the Terminal.  <a href="#a781169ab05ad54c0d37253d73060b77f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">char&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpx__util_8h.html#a338d01dfe3c80732c00450203c85b964">mpxprompt_anykey</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The function Prompt Any key Prompts the user to press the return key.  <a href="#a338d01dfe3c80732c00450203c85b964"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpx__util_8h.html#aacc3dfe470919b0bd1133bce90383e18">mpxprompt_int</a> (void)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">The function Prompt int reads the in the input from the user.  <a href="#aacc3dfe470919b0bd1133bce90383e18"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="mpx__util_8h.html#a849eaf878bb59c0ed185a00d281047e9">errorDecode</a> (int err)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Decodes the errors thrown by various functions in the MPX suport files.  <a href="#a849eaf878bb59c0ed185a00d281047e9"></a><br/></td></tr>
</table>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="a849eaf878bb59c0ed185a00d281047e9"></a><!-- doxytag: member="mpx_util.h::errorDecode" ref="a849eaf878bb59c0ed185a00d281047e9" args="(int err)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void errorDecode </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>err</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Decodes the errors thrown by various functions in the MPX suport files. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>err</em>&nbsp;</td><td>The error value to decode. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mpx__util_8c_source.html#l00111">111</a> of file <a class="el" href="mpx__util_8c_source.html">mpx_util.c</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                             {
        <span class="keywordflow">switch</span>( err ){
                <span class="keywordflow">case</span> ERR_SUP_INVDEV:
                        printf(<span class="stringliteral">&quot;Invalid device ID&quot;</span>);
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> ERR_SUP_INVOPC:
                        printf(<span class="stringliteral">&quot;Invalid operation Code&quot;</span>);
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> ERR_SUP_INVPOS:
                        printf(<span class="stringliteral">&quot;Invalid character postition&quot;</span>);
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> ERR_SUP_RDFAIL:
                        printf(<span class="stringliteral">&quot;Read Failed&quot;</span>); <span class="comment">// could be sysrec or sys get entry</span>
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> ERR_SUP_WRFAIL:
                        printf(<span class="stringliteral">&quot;Write Failed&quot;</span>);
                        <span class="keywordflow">break</span>;
                <span class="comment">// ERR_SUP_INVMOD Exists in documentation but is not present in support code?</span>
                <span class="keywordflow">case</span> ERR_SUP_INVMEM:
                        printf(<span class="stringliteral">&quot;Invalid memory block pointer&quot;</span>);
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> ERR_SUP_FRFAIL:
                        printf(<span class="stringliteral">&quot;Memory Freeing Op Failed&quot;</span>);
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> ERR_SUP_INVDAT:
                        printf(<span class="stringliteral">&quot;Invalid Date&quot;</span>);
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> ERR_SUP_DATNCH:
                        printf(<span class="stringliteral">&quot;Date not properly changed&quot;</span>);
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> ERR_SUP_INVDIR:
                        printf(<span class="stringliteral">&quot;Invalid name or no such directory&quot;</span>);
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> ERR_SUP_DIROPN:
                        printf(<span class="stringliteral">&quot;Error Opening Directory&quot;</span>);
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> ERR_SUP_DIRNOP:
                        printf(<span class="stringliteral">&quot;No directory is open&quot;</span>);
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> ERR_SUP_NOENTR:
                        printf(<span class="stringliteral">&quot;No more entries found&quot;</span>);
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> ERR_SUP_NAMLNG:
                        printf(<span class="stringliteral">&quot;The name was too long for the buffer&quot;</span>);
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">case</span> ERR_SUP_DIRCLS:
                        printf(<span class="stringliteral">&quot;Error closing the directory&quot;</span>);
                        <span class="keywordflow">break</span>;
                <span class="keywordflow">default</span>:
                        printf(<span class="stringliteral">&quot;Unknown Error Code: %d /n&quot;</span>,err);
                        <span class="keywordflow">break</span>;
        }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8cf3281978ba1652fd5d643e1a41f70b"></a><!-- doxytag: member="mpx_util.h::mpx_cls" ref="a8cf3281978ba1652fd5d643e1a41f70b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mpx_cls </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Clear, blanks the screen. </p>

<p>Definition at line <a class="el" href="mpx__util_8c_source.html#l00099">99</a> of file <a class="el" href="mpx__util_8c_source.html">mpx_util.c</a>.</p>

<p><div class="fragment"><pre class="fragment">                   {
        <span class="comment">/* fixme: add error catching */</span>
        <span class="keywordtype">int</span> err = sys_req(CLEAR, TERMINAL, NULL, 0);
        
        <span class="keywordflow">if</span> ( err != OK ) <span class="keywordflow">return</span> err;
        
        <span class="keywordflow">return</span> OK;
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a9e59881f10bd91d7255f18f205e101e6"></a><!-- doxytag: member="mpx_util.h::mpx_pager" ref="a9e59881f10bd91d7255f18f205e101e6" args="(char *line_to_print)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpx_pager </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>line_to_print</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The pager function permits displaying output screen-full at a time. </p>
<p>The line to output MUST NOT end with a <br/>
 (newline) character. </p>

<p>Definition at line <a class="el" href="mpx__util_8c_source.html#l00019">19</a> of file <a class="el" href="mpx__util_8c_source.html">mpx_util.c</a>.</p>

<p><div class="fragment"><pre class="fragment">                                    {

        <span class="keywordflow">if</span> ( lines_printed == 0 ) {
                <a class="code" href="mpx__util_8c.html#a8cf3281978ba1652fd5d643e1a41f70b" title="Clear, blanks the screen.">mpx_cls</a>();
                printf(<span class="stringliteral">&quot;%s&quot;</span>, page_header);
        }
        
        printf(<span class="stringliteral">&quot;%s\n&quot;</span>, line_to_print);

        <span class="keywordflow">if</span> ( (lines_printed != 0) &amp;&amp; (lines_printed % (<a class="code" href="mpx__util_8c.html#a12524c7edee3a47c783740982fd01a3f">LINES_PER_PAGE</a>-header_lines) == 0)) {
                lines_printed = 0;
                printf(<span class="stringliteral">&quot;&lt;&lt;Press enter for MORE&gt;&gt;&quot;</span>); <a class="code" href="mpx__util_8c.html#a338d01dfe3c80732c00450203c85b964" title="The function Prompt Any key Prompts the user to press the return key.">mpxprompt_anykey</a>();
        } <span class="keywordflow">else</span> {
                lines_printed++;
        }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a60afdb7496b6ff469c6b98d2ecde15ed"></a><!-- doxytag: member="mpx_util.h::mpx_pager_init" ref="a60afdb7496b6ff469c6b98d2ecde15ed" args="(char *header)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpx_pager_init </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>header</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The pager initialization function must be used before the pager function. </p>
<p>If no per-page header is required, pass NULL for that parameter.</p>
<p>All lines in the header, including the last one, MUST end with a <br/>
 (newline) character. </p>

<p>Definition at line <a class="el" href="mpx__util_8c_source.html#l00042">42</a> of file <a class="el" href="mpx__util_8c_source.html">mpx_util.c</a>.</p>

<p><div class="fragment"><pre class="fragment">                                  {
        <span class="keywordtype">char</span> *cur_pos   = header;

        page_header     = header;
        lines_printed   = 0;
        pages_printed   = 0;
        header_lines    = 0;

        <span class="keywordflow">if</span> (header != NULL) {
                <span class="keywordflow">while</span> (*cur_pos != <span class="charliteral">&#39;\0&#39;</span>) {
                        <span class="keywordflow">if</span> (*cur_pos == <span class="charliteral">&#39;\n&#39;</span>) {
                                header_lines++;
                        }
                        cur_pos++;
                }
        }
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a781169ab05ad54c0d37253d73060b77f"></a><!-- doxytag: member="mpx_util.h::mpx_readline" ref="a781169ab05ad54c0d37253d73060b77f" args="(char *buffer, int buflen)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpx_readline </td>
          <td>(</td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>buffer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>buflen</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Readline function reads in a line from the Terminal. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in,out]</tt>&nbsp;</td><td valign="top"><em>buffer</em>&nbsp;</td><td>Points to the sting being read. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>buflen</em>&nbsp;</td><td>Defines the maximum characters read. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="mpx__util_8c_source.html#l00088">88</a> of file <a class="el" href="mpx__util_8c_source.html">mpx_util.c</a>.</p>

<p><div class="fragment"><pre class="fragment">                                                                                                                                               {
        <span class="keywordtype">int</span> local_buflen = buflen;
        sys_req(READ, TERMINAL, buffer, &amp;local_buflen);

        <span class="comment">/* remove newline from end of string. */</span>
        <span class="keywordflow">if</span>( buffer[strlen(buffer)-1] == <span class="charliteral">&#39;\n&#39;</span> || buffer[strlen(buffer)-1] == <span class="charliteral">&#39;\r&#39;</span> ) {
                buffer[strlen(buffer)-1] = <span class="charliteral">&#39;\0&#39;</span>;
        } <span class="comment">/* FIXME: strlen() is unsafe; should use strnlen(). */</span>
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a338d01dfe3c80732c00450203c85b964"></a><!-- doxytag: member="mpx_util.h::mpxprompt_anykey" ref="a338d01dfe3c80732c00450203c85b964" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char mpxprompt_anykey </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The function Prompt Any key Prompts the user to press the return key. </p>

<p>Definition at line <a class="el" href="mpx__util_8c_source.html#l00071">71</a> of file <a class="el" href="mpx__util_8c_source.html">mpx_util.c</a>.</p>

<p><div class="fragment"><pre class="fragment">                            {
        <span class="comment">/* user must press enter. */</span>
        <span class="keywordtype">int</span> buflen = 3;
        <span class="keywordtype">char</span> buf[5];
        buf[0] = <span class="charliteral">&#39; &#39;</span>;
        sys_req(READ, TERMINAL, buf, &amp;buflen);
        <span class="keywordflow">return</span> buf[0];
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="aacc3dfe470919b0bd1133bce90383e18"></a><!-- doxytag: member="mpx_util.h::mpxprompt_int" ref="aacc3dfe470919b0bd1133bce90383e18" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mpxprompt_int </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The function Prompt int reads the in the input from the user. </p>

<p>Definition at line <a class="el" href="mpx__util_8c_source.html#l00081">81</a> of file <a class="el" href="mpx__util_8c_source.html">mpx_util.c</a>.</p>

<p><div class="fragment"><pre class="fragment">                        {
        <span class="keywordtype">char</span> input[MAX_LINE];
        <a class="code" href="mpx__util_8c.html#a781169ab05ad54c0d37253d73060b77f" title="Readline function reads in a line from the Terminal.">mpx_readline</a>(input, <a class="code" href="mpx__cmd_8h.html#a842ed03f27719bc87666bfd1f75415b8">MAX_LINE</a>);  
        <span class="keywordflow">return</span> atoi(input);
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a8e31250a20e8bc8e7106f5a37c391199"></a><!-- doxytag: member="mpx_util.h::mpxprompt_yn" ref="a8e31250a20e8bc8e7106f5a37c391199" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int mpxprompt_yn </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>The function Prompt y n prompts the user to answer a Yes or No question. </p>

<p>Definition at line <a class="el" href="mpx__util_8c_source.html#l00061">61</a> of file <a class="el" href="mpx__util_8c_source.html">mpx_util.c</a>.</p>

<p><div class="fragment"><pre class="fragment">                       {
        <span class="keywordtype">char</span> yn = <a class="code" href="mpx__util_8c.html#a338d01dfe3c80732c00450203c85b964" title="The function Prompt Any key Prompts the user to press the return key.">mpxprompt_anykey</a>();
        <span class="keywordflow">if</span>( yn == <span class="charliteral">&#39;Y&#39;</span> || yn == <span class="charliteral">&#39;y&#39;</span> ) {
                <span class="keywordflow">return</span> 1; <span class="comment">/* true */</span>
        } <span class="keywordflow">else</span> {
                <span class="keywordflow">return</span> 0; <span class="comment">/* false */</span>
        }
}
</pre></div></p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Oct 8 2010 21:40:30 for MPX Programmers Manual by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
