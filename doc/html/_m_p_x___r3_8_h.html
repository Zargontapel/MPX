<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>PMOS Programmers Manual: src/MPX_R3.H File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#define-members">Defines</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<h1>src/MPX_R3.H File Reference</h1>  </div>
</div>
<div class="contents">

<p><a href="_m_p_x___r3_8_h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structcontext.html">context</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="structparams.html">params</a></td></tr>
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_x___r3_8_h.html#aca4404f2715f3a392a0d6bc0d73c0da0">SYS_STACK_SIZE</a>&nbsp;&nbsp;&nbsp;200</td></tr>
<tr><td colspan="2"><h2><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structcontext.html">context</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_x___r3_8_h.html#adf3892bed3cfa413e3cd40a97bbfede5">tcontext</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structparams.html">params</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_x___r3_8_h.html#a3bd1cce7a253476fd26f767ea0c0fd3c">tparams</a></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void interrupt&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_x___r3_8_h.html#abeb8ddb92acb8fa40e902b98f2a1ccfb">sys_call</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void interrupt&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_x___r3_8_h.html#ad4150c832feb766384417ab7bae70089">dispatch</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_x___r3_8_h.html#a204c76cc251c17612164688f0b1272ad">mpxcmd_r3run</a> (int argc, char *argv[])</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_m_p_x___r3_8_h.html#afff189bf2a21f1da2a30be81b57da08d">mpxcmd_gor4</a> (int argc, char *argv[])</td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="aca4404f2715f3a392a0d6bc0d73c0da0"></a><!-- doxytag: member="MPX_R3.H::SYS_STACK_SIZE" ref="aca4404f2715f3a392a0d6bc0d73c0da0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SYS_STACK_SIZE&nbsp;&nbsp;&nbsp;200</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="_m_p_x___r3_8_h_source.html#l00023">23</a> of file <a class="el" href="_m_p_x___r3_8_h_source.html">MPX_R3.H</a>.</p>

</div>
</div>
<hr/><h2>Typedef Documentation</h2>
<a class="anchor" id="adf3892bed3cfa413e3cd40a97bbfede5"></a><!-- doxytag: member="MPX_R3.H::tcontext" ref="adf3892bed3cfa413e3cd40a97bbfede5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structcontext.html">context</a>  <a class="el" href="structcontext.html">tcontext</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a3bd1cce7a253476fd26f767ea0c0fd3c"></a><!-- doxytag: member="MPX_R3.H::tparams" ref="a3bd1cce7a253476fd26f767ea0c0fd3c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structparams.html">params</a>  <a class="el" href="structparams.html">tparams</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ad4150c832feb766384417ab7bae70089"></a><!-- doxytag: member="MPX_R3.H::dispatch" ref="ad4150c832feb766384417ab7bae70089" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void interrupt dispatch </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mpx__r3_8c_source.html#l00117">117</a> of file <a class="el" href="mpx__r3_8c_source.html">mpx_r3.c</a>.</p>

<p><div class="fragment"><pre class="fragment">                             {
        
        <span class="keywordflow">if</span> ( <a class="code" href="mpx__r3_8c.html#a8687fceb4a02634b3967391b0b584c4c">sp_save</a> == NULL ){ <span class="comment">//saves the SS and SP from being overwritten if not already done</span>
                <a class="code" href="mpx__r3_8c.html#aab74ba3fd0cd88eb3e908a0916cf39ca">ss_save</a> = _SS;
                <a class="code" href="mpx__r3_8c.html#a8687fceb4a02634b3967391b0b584c4c">sp_save</a> = _SP;
                }
                <a class="code" href="mpx__r3_8c.html#a47c9132f8122c8d3c1e281fb0b55f245">HEAD</a> = <a class="code" href="mpx__r3_8c.html#aa7b04f866ead346c0357975285de0c38">getHead_PCB</a>();
                <span class="comment">//STACK = HEAD -&gt; stackdsc;</span>
                
                <span class="comment">// get a process from the ready queue then set the ss and sp to execute the new process</span>
                <span class="keywordflow">if</span> ( <a class="code" href="mpx__r3_8c.html#a47c9132f8122c8d3c1e281fb0b55f245">HEAD</a> != NULL ){
                        <a class="code" href="mpx__r3_8c.html#a199c6145b9b5ee43b3961894ee22830a">cop</a> = <a class="code" href="mpx__r3_8c.html#a47c9132f8122c8d3c1e281fb0b55f245">HEAD</a>;
                        <a class="code" href="mpx__r3_8c.html#a199c6145b9b5ee43b3961894ee22830a">cop</a> -&gt; state = READY;
                        <a class="code" href="mpx__r2_8c.html#af30a3658210d449b4b53e5be2ed2bc2e" title="This function removes a pcb and dealocates its resouces takes in a pointer to a PCBs location...">remove_PCB</a>(<a class="code" href="mpx__r3_8c.html#a47c9132f8122c8d3c1e281fb0b55f245">HEAD</a>);
                        <a class="code" href="mpx__r3_8c.html#a5a528d0c0f300410569d8b820fd7a803">STACK</a> = <a class="code" href="mpx__r3_8c.html#a199c6145b9b5ee43b3961894ee22830a">cop</a> -&gt; stackdsc;
                        <a class="code" href="mpx__r3_8c.html#a15a3c2a819d08f7ea4c3f453ca0f7f9c">new_ss</a> = FP_SEG(<a class="code" href="mpx__r3_8c.html#a5a528d0c0f300410569d8b820fd7a803">STACK</a> -&gt; top);
                        <a class="code" href="mpx__r3_8c.html#a1838f728cba427f51c6c45aa89cec007">new_sp</a> = FP_OFF(<a class="code" href="mpx__r3_8c.html#a5a528d0c0f300410569d8b820fd7a803">STACK</a> -&gt; top );
                        _SS = <a class="code" href="mpx__r3_8c.html#a15a3c2a819d08f7ea4c3f453ca0f7f9c">new_ss</a>;
                        _SP = <a class="code" href="mpx__r3_8c.html#a1838f728cba427f51c6c45aa89cec007">new_sp</a>;
                }<span class="keywordflow">else</span>{ <span class="comment">// if no process left return</span>
                        <a class="code" href="mpx__r3_8c.html#a199c6145b9b5ee43b3961894ee22830a">cop</a> = NULL;
                        _SS = <a class="code" href="mpx__r3_8c.html#aab74ba3fd0cd88eb3e908a0916cf39ca">ss_save</a>;
                        _SP = <a class="code" href="mpx__r3_8c.html#a8687fceb4a02634b3967391b0b584c4c">sp_save</a>;
                        <a class="code" href="mpx__r3_8c.html#aab74ba3fd0cd88eb3e908a0916cf39ca">ss_save</a> = NULL;
                        <a class="code" href="mpx__r3_8c.html#a8687fceb4a02634b3967391b0b584c4c">sp_save</a> = NULL;
                }
                <span class="comment">//_iret;        </span>
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="afff189bf2a21f1da2a30be81b57da08d"></a><!-- doxytag: member="MPX_R3.H::mpxcmd_gor4" ref="afff189bf2a21f1da2a30be81b57da08d" args="(int argc, char *argv[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpxcmd_gor4 </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>argv</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mpx__r3_8c_source.html#l00266">266</a> of file <a class="el" href="mpx__r3_8c_source.html">mpx_r3.c</a>.</p>

<p><div class="fragment"><pre class="fragment">                                        {
        <a class="code" href="mpx__util_8c.html#a8cf3281978ba1652fd5d643e1a41f70b" title="Clear, blanks the screen.">mpx_cls</a>();
        <a class="code" href="mpx__r3_8c.html#ad4150c832feb766384417ab7bae70089">dispatch</a>();
        <a class="code" href="mpx__util_8c.html#a338d01dfe3c80732c00450203c85b964" title="The function Prompt Any key Prompts the user to press the return key.">mpxprompt_anykey</a>();
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="a204c76cc251c17612164688f0b1272ad"></a><!-- doxytag: member="MPX_R3.H::mpxcmd_r3run" ref="a204c76cc251c17612164688f0b1272ad" args="(int argc, char *argv[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mpxcmd_r3run </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>argv</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mpx__r3_8c_source.html#l00160">160</a> of file <a class="el" href="mpx__r3_8c_source.html">mpx_r3.c</a>.</p>

<p><div class="fragment"><pre class="fragment">                                         {
        
        
        <a class="code" href="structprocess.html">PCB</a> *test1;
        <a class="code" href="structprocess.html">PCB</a> *test2;
        <a class="code" href="structprocess.html">PCB</a> *test3;
        <a class="code" href="structprocess.html">PCB</a> *test4;
        <a class="code" href="structprocess.html">PCB</a> *test5;
        
        <a class="code" href="structstack.html">STACKDSC</a> *stack1;
        <a class="code" href="structstack.html">STACKDSC</a> *stack2;
        <a class="code" href="structstack.html">STACKDSC</a> *stack3;
        <a class="code" href="structstack.html">STACKDSC</a> *stack4;
        <a class="code" href="structstack.html">STACKDSC</a> *stack5;
        
        <a class="code" href="structcontext.html">tcontext</a> *context1;
        <a class="code" href="structcontext.html">tcontext</a> *context2;
        <a class="code" href="structcontext.html">tcontext</a> *context3;
        <a class="code" href="structcontext.html">tcontext</a> *context4;
        <a class="code" href="structcontext.html">tcontext</a> *context5;
        
        <span class="keywordtype">char</span> name1[10] = <span class="stringliteral">&quot;test1&quot;</span>;
        <span class="keywordtype">char</span> name2[10] = <span class="stringliteral">&quot;test2&quot;</span>;
        <span class="keywordtype">char</span> name3[10] = <span class="stringliteral">&quot;test3&quot;</span>;
        <span class="keywordtype">char</span> name4[10] = <span class="stringliteral">&quot;test4&quot;</span>;
        <span class="keywordtype">char</span> name5[10] = <span class="stringliteral">&quot;test5&quot;</span>;
        
        
        
        test1 = <a class="code" href="mpx__r2_8c.html#a58a8a1ea0a96b9ecf0be29179a5a0a1e" title="Allocates the memory for a new Process Control Block and returns the pointer to the new PCB location ...">allocate_PCB</a>();
        test2 = <a class="code" href="mpx__r2_8c.html#a58a8a1ea0a96b9ecf0be29179a5a0a1e" title="Allocates the memory for a new Process Control Block and returns the pointer to the new PCB location ...">allocate_PCB</a>();
        test3 = <a class="code" href="mpx__r2_8c.html#a58a8a1ea0a96b9ecf0be29179a5a0a1e" title="Allocates the memory for a new Process Control Block and returns the pointer to the new PCB location ...">allocate_PCB</a>();
        test4 = <a class="code" href="mpx__r2_8c.html#a58a8a1ea0a96b9ecf0be29179a5a0a1e" title="Allocates the memory for a new Process Control Block and returns the pointer to the new PCB location ...">allocate_PCB</a>();
        test5 = <a class="code" href="mpx__r2_8c.html#a58a8a1ea0a96b9ecf0be29179a5a0a1e" title="Allocates the memory for a new Process Control Block and returns the pointer to the new PCB location ...">allocate_PCB</a>();
        
        stack1 = test1 -&gt; stackdsc;
        stack2 = test2 -&gt; stackdsc;
        stack3 = test3 -&gt; stackdsc;
        stack4 = test4 -&gt; stackdsc;
        stack5 = test5 -&gt; stackdsc;
        
        stack1 -&gt; top = stack1 -&gt; base + <a class="code" href="mpx__r2_8h.html#a21d9543c516fffee84a7963224271f95" title="is the size of the stack in Bytes">STACKSIZE</a> - <span class="keyword">sizeof</span>(<a class="code" href="structcontext.html">tcontext</a>);
        stack2 -&gt; top = stack2 -&gt; base + <a class="code" href="mpx__r2_8h.html#a21d9543c516fffee84a7963224271f95" title="is the size of the stack in Bytes">STACKSIZE</a> - <span class="keyword">sizeof</span>(<a class="code" href="structcontext.html">tcontext</a>);
        stack3 -&gt; top = stack3 -&gt; base + <a class="code" href="mpx__r2_8h.html#a21d9543c516fffee84a7963224271f95" title="is the size of the stack in Bytes">STACKSIZE</a> - <span class="keyword">sizeof</span>(<a class="code" href="structcontext.html">tcontext</a>);
        stack4 -&gt; top = stack4 -&gt; base + <a class="code" href="mpx__r2_8h.html#a21d9543c516fffee84a7963224271f95" title="is the size of the stack in Bytes">STACKSIZE</a> - <span class="keyword">sizeof</span>(<a class="code" href="structcontext.html">tcontext</a>);
        stack5 -&gt; top = stack5 -&gt; base + <a class="code" href="mpx__r2_8h.html#a21d9543c516fffee84a7963224271f95" title="is the size of the stack in Bytes">STACKSIZE</a> - <span class="keyword">sizeof</span>(<a class="code" href="structcontext.html">tcontext</a>); 
        
        context1 = (<a class="code" href="structcontext.html">tcontext</a>*) stack1 -&gt; top;
        context2 = (<a class="code" href="structcontext.html">tcontext</a>*) stack2 -&gt; top;
        context3 = (<a class="code" href="structcontext.html">tcontext</a>*) stack3 -&gt; top;
        context4 = (<a class="code" href="structcontext.html">tcontext</a>*) stack4 -&gt; top;
        context5 = (<a class="code" href="structcontext.html">tcontext</a>*) stack5 -&gt; top;
        
        
        
        context1-&gt;DS = _DS;
        context1-&gt;ES = _ES;
        context1-&gt;CS = FP_SEG(&amp;<a class="code" href="procs-r3_8c.html#ae4496e9c01adc7562ce34516c13226a0">test1_R3</a>);
        context1-&gt;IP = FP_OFF(&amp;<a class="code" href="procs-r3_8c.html#ae4496e9c01adc7562ce34516c13226a0">test1_R3</a>);
        context1-&gt;FLAGS = 0x200;
        
        context2-&gt;<a class="code" href="structcontext.html#a657e73663a4443be61a078d31c28ee3e">DS</a> = _DS;
        context2-&gt;<a class="code" href="structcontext.html#a81a78fef7bda3a5dd852b28a905890ab">ES</a> = _ES;
        context2-&gt;<a class="code" href="structcontext.html#a0b41903d1fa3b4e1ce892f59480323b5">CS</a> = FP_SEG(&amp;<a class="code" href="procs-r3_8c.html#ab61a49e4507b3dba1bfad0cc9510d0a6">test2_R3</a>);
        context2-&gt;<a class="code" href="structcontext.html#a02ac427e75af0dfe7d649dc8821cde0a">IP</a> = FP_OFF(&amp;<a class="code" href="procs-r3_8c.html#ab61a49e4507b3dba1bfad0cc9510d0a6">test2_R3</a>);
        context2-&gt;<a class="code" href="structcontext.html#a251dc5ae40a989bef945d2df6925f9a3">FLAGS</a> = 0x200;
        
        context3-&gt;<a class="code" href="structcontext.html#a657e73663a4443be61a078d31c28ee3e">DS</a> = _DS;
        context3-&gt;<a class="code" href="structcontext.html#a81a78fef7bda3a5dd852b28a905890ab">ES</a> = _ES;
        context3-&gt;<a class="code" href="structcontext.html#a0b41903d1fa3b4e1ce892f59480323b5">CS</a> = FP_SEG(&amp;<a class="code" href="procs-r3_8c.html#a453a58ecc6482a24bf02e7caf67aa41a">test3_R3</a>);
        context3-&gt;<a class="code" href="structcontext.html#a02ac427e75af0dfe7d649dc8821cde0a">IP</a> = FP_OFF(&amp;<a class="code" href="procs-r3_8c.html#a453a58ecc6482a24bf02e7caf67aa41a">test3_R3</a>);
        context3-&gt;<a class="code" href="structcontext.html#a251dc5ae40a989bef945d2df6925f9a3">FLAGS</a> = 0x200;
        
        context4-&gt;<a class="code" href="structcontext.html#a657e73663a4443be61a078d31c28ee3e">DS</a> = _DS;
        context4-&gt;<a class="code" href="structcontext.html#a81a78fef7bda3a5dd852b28a905890ab">ES</a> = _ES;
        context4-&gt;<a class="code" href="structcontext.html#a0b41903d1fa3b4e1ce892f59480323b5">CS</a> = FP_SEG(&amp;<a class="code" href="procs-r3_8c.html#aaa737ca092fa5d35b33665401852fb7b">test4_R3</a>);
        context4-&gt;<a class="code" href="structcontext.html#a02ac427e75af0dfe7d649dc8821cde0a">IP</a> = FP_OFF(&amp;<a class="code" href="procs-r3_8c.html#aaa737ca092fa5d35b33665401852fb7b">test4_R3</a>);
        context4-&gt;<a class="code" href="structcontext.html#a251dc5ae40a989bef945d2df6925f9a3">FLAGS</a> = 0x200;
        
        context5-&gt;<a class="code" href="structcontext.html#a657e73663a4443be61a078d31c28ee3e">DS</a> = _DS;
        context5-&gt;<a class="code" href="structcontext.html#a81a78fef7bda3a5dd852b28a905890ab">ES</a> = _ES;
        context5-&gt;<a class="code" href="structcontext.html#a0b41903d1fa3b4e1ce892f59480323b5">CS</a> = FP_SEG(&amp;<a class="code" href="procs-r3_8c.html#abe909889e9cb85d683914b291867a6e6">test5_R3</a>);
        context5-&gt;<a class="code" href="structcontext.html#a02ac427e75af0dfe7d649dc8821cde0a">IP</a> = FP_OFF(&amp;<a class="code" href="procs-r3_8c.html#abe909889e9cb85d683914b291867a6e6">test5_R3</a>);
        context5-&gt;<a class="code" href="structcontext.html#a251dc5ae40a989bef945d2df6925f9a3">FLAGS</a> = 0x200;
        context5-&gt;<a class="code" href="structcontext.html#a657e73663a4443be61a078d31c28ee3e">DS</a> = _DS;
        
        <a class="code" href="mpx__r2_8c.html#a316c9619aba53c03c17afbc0a0dbf096" title="This Function initializes the contents of a PCB and checks the values if correct returns 0 if not ret...">setup_PCB</a>(test1,name1,<a class="code" href="mpx__r2_8h.html#a796bd7c6ba2e59281760fb155c6287e8" title="is defined as 0">APPLICATION</a>,<a class="code" href="mpx__r2_8h.html#ad1235d5ce36f7267285e82dccd428aa6" title="state is Defined as 1">READY</a>, 1);
        <a class="code" href="mpx__r2_8c.html#a316c9619aba53c03c17afbc0a0dbf096" title="This Function initializes the contents of a PCB and checks the values if correct returns 0 if not ret...">setup_PCB</a>(test2,name2,<a class="code" href="mpx__r2_8h.html#a796bd7c6ba2e59281760fb155c6287e8" title="is defined as 0">APPLICATION</a>,<a class="code" href="mpx__r2_8h.html#ad1235d5ce36f7267285e82dccd428aa6" title="state is Defined as 1">READY</a>, 2);
        <a class="code" href="mpx__r2_8c.html#a316c9619aba53c03c17afbc0a0dbf096" title="This Function initializes the contents of a PCB and checks the values if correct returns 0 if not ret...">setup_PCB</a>(test3,name3,<a class="code" href="mpx__r2_8h.html#a796bd7c6ba2e59281760fb155c6287e8" title="is defined as 0">APPLICATION</a>,<a class="code" href="mpx__r2_8h.html#ad1235d5ce36f7267285e82dccd428aa6" title="state is Defined as 1">READY</a>, 3);
        <a class="code" href="mpx__r2_8c.html#a316c9619aba53c03c17afbc0a0dbf096" title="This Function initializes the contents of a PCB and checks the values if correct returns 0 if not ret...">setup_PCB</a>(test4,name4,<a class="code" href="mpx__r2_8h.html#a796bd7c6ba2e59281760fb155c6287e8" title="is defined as 0">APPLICATION</a>,<a class="code" href="mpx__r2_8h.html#ad1235d5ce36f7267285e82dccd428aa6" title="state is Defined as 1">READY</a>, 4);
        <a class="code" href="mpx__r2_8c.html#a316c9619aba53c03c17afbc0a0dbf096" title="This Function initializes the contents of a PCB and checks the values if correct returns 0 if not ret...">setup_PCB</a>(test5,name5,<a class="code" href="mpx__r2_8h.html#a796bd7c6ba2e59281760fb155c6287e8" title="is defined as 0">APPLICATION</a>,<a class="code" href="mpx__r2_8h.html#ad1235d5ce36f7267285e82dccd428aa6" title="state is Defined as 1">READY</a>, 5);

        <a class="code" href="mpx__r2_8c.html#aa3b334e3a5afd6e590917667ad359a6f" title="This function inserts a PCB into its aproprate PCB Queue.">insert_PCB</a>(test1);
        <a class="code" href="mpx__r2_8c.html#aa3b334e3a5afd6e590917667ad359a6f" title="This function inserts a PCB into its aproprate PCB Queue.">insert_PCB</a>(test2);
        <a class="code" href="mpx__r2_8c.html#aa3b334e3a5afd6e590917667ad359a6f" title="This function inserts a PCB into its aproprate PCB Queue.">insert_PCB</a>(test3);
        <a class="code" href="mpx__r2_8c.html#aa3b334e3a5afd6e590917667ad359a6f" title="This function inserts a PCB into its aproprate PCB Queue.">insert_PCB</a>(test4);
        <a class="code" href="mpx__r2_8c.html#aa3b334e3a5afd6e590917667ad359a6f" title="This function inserts a PCB into its aproprate PCB Queue.">insert_PCB</a>(test5);
        
        
        <a class="code" href="mpx__util_8c.html#a8cf3281978ba1652fd5d643e1a41f70b" title="Clear, blanks the screen.">mpx_cls</a>();
        <a class="code" href="mpx__r3_8c.html#ad4150c832feb766384417ab7bae70089">dispatch</a>();
        <a class="code" href="mpx__util_8c.html#a338d01dfe3c80732c00450203c85b964" title="The function Prompt Any key Prompts the user to press the return key.">mpxprompt_anykey</a>();
        
}
</pre></div></p>

</div>
</div>
<a class="anchor" id="abeb8ddb92acb8fa40e902b98f2a1ccfb"></a><!-- doxytag: member="MPX_R3.H::sys_call" ref="abeb8ddb92acb8fa40e902b98f2a1ccfb" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void interrupt sys_call </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Definition at line <a class="el" href="mpx__r3_8c_source.html#l00059">59</a> of file <a class="el" href="mpx__r3_8c_source.html">mpx_r3.c</a>.</p>

<p><div class="fragment"><pre class="fragment">                             {
        

        <a class="code" href="mpx__r3_8c.html#a199c6145b9b5ee43b3961894ee22830a">cop</a>-&gt; stackdsc -&gt; top = (<span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> *) MK_FP(_SS, _SP);
        <a class="code" href="mpx__r3_8c.html#aba65384dc26beadd1cf4106e7e60a482">param_p</a> = ( <a class="code" href="structparams.html">tparams</a>*)(<span class="keyword">sizeof</span>(<a class="code" href="structcontext.html">tcontext</a>) + <a class="code" href="mpx__r3_8c.html#a199c6145b9b5ee43b3961894ee22830a">cop</a> -&gt; stackdsc -&gt; top);<span class="comment">//code supplied by GA bryan</span>
        <a class="code" href="mpx__r3_8c.html#a66a5f6b4272d2caa8085e571fdd61c70">context_p</a> = (<a class="code" href="structcontext.html">tcontext</a>*) <a class="code" href="mpx__r3_8c.html#a199c6145b9b5ee43b3961894ee22830a">cop</a> -&gt; stackdsc -&gt; top;
        <span class="comment">//SWITCH TO TEMP STACK by storing all of your variables in memory</span>
        
        <span class="comment">//replaces SS and SP</span>
        <a class="code" href="mpx__r3_8c.html#a15a3c2a819d08f7ea4c3f453ca0f7f9c">new_ss</a> = FP_SEG(<a class="code" href="mpx__r3_8c.html#a5e9ba16a803c3deb38f984cba2e42d5f">sys_stack</a>);
        <a class="code" href="mpx__r3_8c.html#a1838f728cba427f51c6c45aa89cec007">new_sp</a> = FP_OFF(<a class="code" href="mpx__r3_8c.html#a5e9ba16a803c3deb38f984cba2e42d5f">sys_stack</a>);
        <a class="code" href="mpx__r3_8c.html#a1838f728cba427f51c6c45aa89cec007">new_sp</a> += SYS_STACK_SIZE;
        _SS = <a class="code" href="mpx__r3_8c.html#a15a3c2a819d08f7ea4c3f453ca0f7f9c">new_ss</a>;
        _SP = <a class="code" href="mpx__r3_8c.html#a1838f728cba427f51c6c45aa89cec007">new_sp</a>;
        
        <span class="comment">// if the idle opcode is sent then change staate to ready and insert into queue</span>
        <span class="keywordflow">if</span> ( <a class="code" href="mpx__r3_8c.html#aba65384dc26beadd1cf4106e7e60a482">param_p</a> -&gt; op_code == <a class="code" href="_m_p_x___r5_8h.html#a9c21a7caee326d7803b94ae1952b27ca">IDLE</a> ){
                        <a class="code" href="mpx__r3_8c.html#a199c6145b9b5ee43b3961894ee22830a">cop</a> -&gt; state = READY;
                        <a class="code" href="mpx__r2_8c.html#aa3b334e3a5afd6e590917667ad359a6f" title="This function inserts a PCB into its aproprate PCB Queue.">insert_PCB</a>(<a class="code" href="mpx__r3_8c.html#a199c6145b9b5ee43b3961894ee22830a">cop</a>);
                        <a class="code" href="mpx__r3_8c.html#a199c6145b9b5ee43b3961894ee22830a">cop</a> = NULL;
        }
        
        <span class="comment">// if the exit opcode is sent then remove and free the pcb</span>
        <span class="keywordflow">if</span>( <a class="code" href="mpx__r3_8c.html#aba65384dc26beadd1cf4106e7e60a482">param_p</a> -&gt; op_code == EXIT ){
                <a class="code" href="mpx__r2_8c.html#af30a3658210d449b4b53e5be2ed2bc2e" title="This function removes a pcb and dealocates its resouces takes in a pointer to a PCBs location...">remove_PCB</a>(<a class="code" href="mpx__r3_8c.html#a199c6145b9b5ee43b3961894ee22830a">cop</a>);
                <a class="code" href="mpx__r2_8c.html#a79890f055b1d0fccf1962bbde4877caa" title="This function releases all allocated memory related to a PCB.">free_PCB</a>(<a class="code" href="mpx__r3_8c.html#a199c6145b9b5ee43b3961894ee22830a">cop</a>);
                <a class="code" href="mpx__r3_8c.html#a199c6145b9b5ee43b3961894ee22830a">cop</a> = NULL;
        }
        
        <span class="comment">// if ( param_p -&gt; op_code == READ ){</span>
                <span class="comment">// if( param_p -&gt; device_id == TERMINAL ){</span>
                
                <span class="comment">// }</span>
                <span class="comment">// if ( param_p -&gt; device_id == COM_PORT ){</span>
                
                <span class="comment">// }</span>
        <span class="comment">// }</span>
        <span class="comment">// if ( param_p -&gt; op_code == WRITE ){</span>
                <span class="comment">// if( param_p -&gt; device_id == TERMINAL ){</span>
                
                <span class="comment">// }</span>
                <span class="comment">// if( param_p -&gt; device_id == COM_PORT ){</span>
                
                <span class="comment">// }</span>
                
        <span class="comment">// }</span>
        
        

        
        <span class="comment">// FIXME NO ERROR CHECKING </span>
        <span class="comment">//context_p -&gt; AX = 0;</span>
        
        <span class="comment">//CALL TO DISPATCHER</span>
        <a class="code" href="mpx__r3_8c.html#ad4150c832feb766384417ab7bae70089">dispatch</a>();
        
}
</pre></div></p>

</div>
</div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Dec 10 2010 01:08:39 for PMOS Programmers Manual by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
