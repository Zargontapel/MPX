\hypertarget{mpx__r2_8c_source}{
\section{src/mpx\_\-r2.c}
}

\begin{DoxyCode}
00001 \textcolor{comment}{/***********************************************************************}
00002 \textcolor{comment}{        MPX: The MultiProgramming eXecutive}
00003 \textcolor{comment}{        Project to Accompany}
00004 \textcolor{comment}{        A Practical Approach to Operating Systems}
00005 \textcolor{comment}{        Malcolm G. Lane & James D. Mooney}
00006 \textcolor{comment}{        Copyright 1993, P.W.S. Kent Publishing Co., Boston, MA.}
00007 \textcolor{comment}{}
00008 \textcolor{comment}{        File Name:      mpx\_r2.c}
00009 \textcolor{comment}{}
00010 \textcolor{comment}{        Author: Nathaniel Clay and Nicholas Yanak}
00011 \textcolor{comment}{        Version: 1.1}
00012 \textcolor{comment}{        Date:  12/9/2010}
00013 \textcolor{comment}{}
00014 \textcolor{comment}{        Purpose: Provides several supporting functions such as allocation and sea
      rch}
00015 \textcolor{comment}{        for PCB's}
00016 \textcolor{comment}{}
00017 \textcolor{comment}{                }
00018 \textcolor{comment}{        Environment: Windows XP 32 bit}
00019 \textcolor{comment}{}
00020 \textcolor{comment}{************************************************************************/}
00021 \textcolor{preprocessor}{#include "\hyperlink{mpx__r2_8h}{mpx_r2.h}"}
00022 \textcolor{preprocessor}{#include "mpx\_supt.h"}
00023 \textcolor{preprocessor}{#include "mystdlib.h"}
00024 \textcolor{preprocessor}{#include "\hyperlink{mpx__util_8h}{mpx_util.h}"}
00025 \textcolor{preprocessor}{#include <string.h>}
00026 \textcolor{preprocessor}{#include <stdio.h>}
00027 
\hypertarget{mpx__r2_8c_source_l00028}{}\hyperlink{mpx__r4_8c_8_r_e_m_o_t_e_8c_afe54c168944e64a28d76b6e4d3abb391}{00028} \hyperlink{structroot}{ROOT} *\hyperlink{mpx__r2_8c_afe54c168944e64a28d76b6e4d3abb391}{rQueue}=NULL; 
\hypertarget{mpx__r2_8c_source_l00029}{}\hyperlink{mpx__r4_8c_8_r_e_m_o_t_e_8c_a8dec03d44c5fad121b5568399d1cf278}{00029} \hyperlink{structroot}{ROOT} *\hyperlink{mpx__r2_8c_ac4950750e25f86d7ee69d6bcca87ef5f}{wsQueue}=NULL;
00030 
00031 
00032 
00033 
\hypertarget{mpx__r2_8c_source_l00037}{}\hyperlink{mpx__r2_8h_a58a8a1ea0a96b9ecf0be29179a5a0a1e}{00037} \hyperlink{structprocess}{PCB} *\hyperlink{mpx__r2_8c_a58a8a1ea0a96b9ecf0be29179a5a0a1e}{allocate_PCB}( \textcolor{keywordtype}{void} )\{
00038         \hyperlink{structprocess}{PCB} *newPCB; 
00039         \textcolor{keywordtype}{int} i; 
00040         \hyperlink{structmem}{MEMDSC} *newMemDsc;
00041         \hyperlink{structstack}{STACKDSC} *newStackDsc;
00042         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *\hyperlink{structstack}{stack}; 
00043         
00044         
00045         \textcolor{comment}{// Allocate memory to each of the distinct parts of the PCB}
00046         newStackDsc = (\hyperlink{structstack}{STACKDSC}*) sys\_alloc\_mem(\textcolor{keyword}{sizeof}(\hyperlink{structstack}{STACKDSC}));
00047         newMemDsc = (\hyperlink{structmem}{MEMDSC}*) sys\_alloc\_mem(\textcolor{keyword}{sizeof}(\hyperlink{structmem}{MEMDSC}));
00048         newPCB = (\hyperlink{structprocess}{PCB}*) sys\_alloc\_mem(\textcolor{keyword}{sizeof}(\hyperlink{structprocess}{PCB}));
00049         stack = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}*) sys\_alloc\_mem(\hyperlink{mpx__r2_8h_a21d9543c516fffee84a7963224271f95}{STACKSIZE}*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}));
00050         
00051         \textcolor{keywordflow}{if} ( stack == NULL ||
00052                  newStackDsc == NULL || 
00053                  newMemDsc == NULL ||
00054                  newPCB == NULL ) \textcolor{keywordflow}{return} NULL; 
00055         
00056         \textcolor{comment}{//Setup Memory Descriptor with Default Values for Module 2}
00057         newMemDsc -> \hyperlink{_m_p_x___r5_8h_aa23c661441688350614bd6a350d2b6ff}{size} = 0;
00058         newMemDsc -> loadADDR = NULL;
00059         newMemDsc -> execADDR = NULL;
00060         
00061         \textcolor{comment}{//Setup the Stack}
00062 
00063         memset(stack,0,\hyperlink{mpx__r2_8h_a21d9543c516fffee84a7963224271f95}{STACKSIZE}*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}));\textcolor{comment}{//ZERO out Stack to aid i
      n debug....}
00064         newStackDsc -> base = stack; \textcolor{comment}{// x86 arch Stacks start at the Higest value
      }
00065         newStackDsc -> top  = stack + STACKSIZE;\textcolor{comment}{// and go to lowest or n - 2 for 
      Word alloc}
00066         
00067         \textcolor{comment}{//Bundling Opereations of Stack Descripter Bellow}
00068         newPCB -> stackdsc = newStackDsc;  \textcolor{comment}{// stack descriptor is placed in the P
      CB}
00069         
00070         \textcolor{comment}{//Bundling Operations of Memory Descriptor }
00071         newPCB -> memdsc = newMemDsc; \textcolor{comment}{// memory descriptor is placed in the PCB}
00072         
00073         \textcolor{keywordflow}{return} newPCB;
00074         
00075 \}
00076 
\hypertarget{mpx__r2_8c_source_l00080}{}\hyperlink{mpx__r2_8h_a79890f055b1d0fccf1962bbde4877caa}{00080} \textcolor{keywordtype}{int} \hyperlink{mpx__r2_8c_a79890f055b1d0fccf1962bbde4877caa}{free_PCB}( \hyperlink{structprocess}{PCB} *pointer \textcolor{comment}{/*< [in] is a pointer to a PCB  */} )\{
00081         \hyperlink{structstack}{STACKDSC} *stackdscptr = pointer -> stackdsc;
00082         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *\hyperlink{structstack}{stack} = stackdscptr -> base;
00083         \hyperlink{structmem}{MEMDSC} *memptr = pointer -> memdsc;
00084         
00085         \textcolor{keywordtype}{int} err;
00086         
00087         \textcolor{comment}{//Free Stack First}
00088         err = sys\_free\_mem(stack);
00089         \textcolor{keywordflow}{if}( err < 0 ) \textcolor{keywordflow}{return} err;
00090         \textcolor{comment}{//Second free Stack Descriptor}
00091         err = sys\_free\_mem(stackdscptr);
00092         \textcolor{keywordflow}{if}( err < 0 ) \textcolor{keywordflow}{return} err;
00093         \textcolor{comment}{//Third free Memory Descriptor}
00094         err = sys\_free\_mem(memptr);
00095         \textcolor{keywordflow}{if}( err < 0 ) \textcolor{keywordflow}{return} err;
00096         \textcolor{comment}{//Finaly free Process Control block}
00097         err = sys\_free\_mem(pointer);
00098         \textcolor{keywordflow}{if}(err < 0 ) \textcolor{keywordflow}{return} err;
00099         
00100         \textcolor{keywordflow}{return} 0; \textcolor{comment}{//freed mem ok}
00101 \}
00102 
00104 \textcolor{comment}{//FIXME: Move to allocate, Create to setup}
\hypertarget{mpx__r2_8c_source_l00105}{}\hyperlink{mpx__r2_8h_a48d816fd79ba99118f2dff84d84395f5}{00105} \textcolor{keywordtype}{int} \hyperlink{mpx__r2_8c_a316c9619aba53c03c17afbc0a0dbf096}{setup_PCB}( \hyperlink{structprocess}{PCB} *pointer, \textcolor{keywordtype}{char} *Name, \textcolor{keywordtype}{int} classType, \textcolor{keywordtype}{int} state, \textcolor{keywordtype}{int} priority )
      \{\textcolor{comment}{//FIXME: NO DATA VV}
00106         \textcolor{keywordtype}{int} ret; 
00107         \textcolor{keywordtype}{char} *name = pointer -> name;
00108         ret = 0; 
00109         strcpy(name,Name); 
00110         
00111         \textcolor{keywordflow}{if}( \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}(name) == NULL)\{ 
00112                 \textcolor{keywordflow}{if}( classType == 1 || classType == 0 )\{
00113                         pointer -> classType = classType;
00114                 \}\textcolor{keywordflow}{else}\{
00115                         ret = 1; 
00116                 \}
00117                  \textcolor{keywordflow}{if}( state == \hyperlink{mpx__r2_8h_a48f6457243719e7031768d4100741159}{BLOCKED} || 
00118                          state == \hyperlink{mpx__r2_8h_a07b1141143e8825b04670da23fca8cc7}{SUSPENDED_READY} || 
00119                      state == \hyperlink{mpx__r2_8h_a6e41bb5a80c5049e8d364bab8ee4d73a}{SUSPENDED_BLOCKED} ||
00120                          state == \hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY} || 
00121                          state == \hyperlink{mpx__r2_8h_a6fb7181d994ee98e735494be55809708}{RUNNING} )
00122                 \{
00123                 pointer -> state = state;
00124                 \}\textcolor{keywordflow}{else}\{
00125                         ret = 1; 
00126                 \}
00127                 \textcolor{keywordflow}{if}( priority <= 127 && priority >= -128)\{ 
00128                         pointer -> priority = priority;
00129                 \}\textcolor{keywordflow}{else}\{
00130                         ret = 1;
00131                 \}
00132         \}\textcolor{keywordflow}{else}\{
00133                 ret = 1;
00134         \}
00135         \textcolor{keywordflow}{return} ret; 
00136 \}
\hypertarget{mpx__r2_8c_source_l00138}{}\hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{00138} \textcolor{keywordtype}{char} *\hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{string_PCB}( \hyperlink{structprocess}{PCB} *pointer)\{
00139         \textcolor{keywordtype}{char} line\_buf[MAX\_LINE];
00140         \textcolor{keywordtype}{char} *name = pointer -> name;
00141         \textcolor{keywordtype}{signed} \textcolor{keywordtype}{char} *classType = pointer -> classType;
00142         \textcolor{keywordtype}{signed} \textcolor{keywordtype}{char} *stateType = pointer -> state;
00143         \textcolor{keywordtype}{signed} \textcolor{keywordtype}{char} *priority = pointer -> priority;
00144         \textcolor{keywordtype}{char} \textcolor{keyword}{class}[60]; 
00145         \textcolor{keywordtype}{char} state[60]; 
00146         
00147         \textcolor{keywordflow}{if}( classType == \hyperlink{mpx__r2_8h_a796bd7c6ba2e59281760fb155c6287e8}{APPLICATION} ) strcpy( \textcolor{keyword}{class}, \textcolor{stringliteral}{"Application"});
00148         \textcolor{keywordflow}{if}( classType == \hyperlink{mpx__r2_8h_a21b97df85e65556468b28a576311271c}{SYSTEM} ) strcpy( \textcolor{keyword}{class}, \textcolor{stringliteral}{"System"} );
00149         
00150         \textcolor{keywordflow}{if}( stateType == \hyperlink{mpx__r2_8h_a6fb7181d994ee98e735494be55809708}{RUNNING} ) strcpy(state,\textcolor{stringliteral}{"Running"});
00151         \textcolor{keywordflow}{if}( stateType == \hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY} ) strcpy( state ,\textcolor{stringliteral}{"Ready"} );
00152         \textcolor{keywordflow}{if}( stateType == \hyperlink{mpx__r2_8h_a48f6457243719e7031768d4100741159}{BLOCKED} ) strcpy( state ,\textcolor{stringliteral}{"Blocked"});
00153         \textcolor{keywordflow}{if}( stateType == \hyperlink{mpx__r2_8h_a07b1141143e8825b04670da23fca8cc7}{SUSPENDED_READY} ) strcpy(state ,\textcolor{stringliteral}{"Suspended Ready"});
00154         \textcolor{keywordflow}{if} ( stateType == \hyperlink{mpx__r2_8h_a6e41bb5a80c5049e8d364bab8ee4d73a}{SUSPENDED_BLOCKED} ) strcpy( state,\textcolor{stringliteral}{"Suspended Blocked"} )
       ;
00155         
00156 
00157     sprintf(&line\_buf,\textcolor{stringliteral}{"Name: %s  Class: %s State: %s Priority: %d "}, name, \textcolor{keyword}{class},
       state,priority); 
00158         
00159         \textcolor{keywordflow}{return} line\_buf; 
00160 \}
00161 
\hypertarget{mpx__r2_8c_source_l00163}{}\hyperlink{mpx__r2_8h_aa3b334e3a5afd6e590917667ad359a6f}{00163} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_aa3b334e3a5afd6e590917667ad359a6f}{insert_PCB}(\hyperlink{structprocess}{PCB} *PCBpointer\textcolor{comment}{/*< pointer to a PCB to insert*/} )\{ 
00164    \textcolor{keywordtype}{int} ORD; 
00165    \textcolor{keyword}{static} \textcolor{keywordtype}{int} count; 
00166         \textcolor{keywordflow}{if}( count == \hyperlink{mpx__r2_8h_ac328e551bde3d39b6d7b8cc9e048d941}{ZERO} )\{ 
00167                 rQueue = (\hyperlink{structroot}{ROOT}*) sys\_alloc\_mem(\textcolor{keyword}{sizeof}(\hyperlink{structroot}{ROOT}));
00168                 wsQueue = (\hyperlink{structroot}{ROOT}*) sys\_alloc\_mem(\textcolor{keyword}{sizeof}(\hyperlink{structroot}{ROOT}));
00169         \}
00170    
00171    \textcolor{keywordflow}{if} ( PCBpointer -> state == \hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY} || PCBpointer -> state == \hyperlink{mpx__r2_8h_a6fb7181d994ee98e735494be55809708}{RUNNING} )\{
00172                 ORD  = PORDR; 
00173         \}
00174         \textcolor{keywordflow}{if}( PCBpointer -> state == \hyperlink{mpx__r2_8h_a48f6457243719e7031768d4100741159}{BLOCKED} ||
00175                 PCBpointer -> state == \hyperlink{mpx__r2_8h_a07b1141143e8825b04670da23fca8cc7}{SUSPENDED_READY} || 
00176                 PCBpointer -> state == \hyperlink{mpx__r2_8h_a6e41bb5a80c5049e8d364bab8ee4d73a}{SUSPENDED_BLOCKED} )\{
00177                 ORD  = FIFO; 
00178         \}
00179         
00180    \textcolor{keywordflow}{switch}(ORD)\{
00181                 \textcolor{keywordflow}{case} \hyperlink{mpx__r2_8h_ace032edafb5fe32666cf53a1e7a957e0}{PORDR}:
00182                         \hyperlink{mpx__r2_8c_a722f27bfb24e46ffd7eb86fb34024ed9}{insert_PORDR}(PCBpointer,rQueue);
00183                         \textcolor{keywordflow}{break};
00184                 \textcolor{keywordflow}{case} \hyperlink{mpx__r2_8h_af6bc2702f6a1a4bb063b0726d90999da}{FIFO}:
00185                         \hyperlink{mpx__r2_8c_a58a3e3525ed6385f632835b55ab7d7d1}{insert_FIFO}(PCBpointer,wsQueue);
00186                         \textcolor{keywordflow}{break};
00187                 \textcolor{keywordflow}{default}:
00188                         \textcolor{comment}{//printf("ORDER not Valid");}
00189                         \textcolor{keywordflow}{break};
00190                 \};
00191         count++;\textcolor{comment}{//Update the number of times the function has run.}
00192 \}
\hypertarget{mpx__r2_8c_source_l00194}{}\hyperlink{mpx__r2_8h_a9a582eea14fd6628937fb0891220fa82}{00194} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_a722f27bfb24e46ffd7eb86fb34024ed9}{insert_PORDR}( \hyperlink{structprocess}{PCB} *PCBpointer, \hyperlink{structroot}{ROOT} *queueROOT )\{ \textcolor{comment}{//FIXME: NO ERROR CHECKING
      }
00195         \hyperlink{structpage}{ELEM} *node; \textcolor{comment}{// declare node of type element}
00196         \hyperlink{structpage}{ELEM} *incr; \textcolor{comment}{// used to traverse queue}
00197         \hyperlink{structpage}{ELEM} *temp1; \textcolor{comment}{// used for temporary storage }
00198         node = sys\_alloc\_mem( \textcolor{keyword}{sizeof}(\hyperlink{structpage}{ELEM})); \textcolor{comment}{// allocate Memory for node}
00199         node -> \hyperlink{structprocess}{process} = PCBpointer;\textcolor{comment}{// add the PCB to the node}
00200         
00201         \textcolor{keywordflow}{if}( queueROOT -> node == NULL )\{ \textcolor{comment}{// if this is the first element ever in 
      the queue}
00202                 node -> left = NULL;
00203                 node -> right = NULL;
00204                 queueROOT -> node = node; \textcolor{comment}{// Set the first element in the queue t
      o node of Type Element}
00205                 queueROOT -> count += 1; \textcolor{comment}{// increase count by one}
00206                 \textcolor{keywordflow}{return}; \textcolor{comment}{//exit out first node is in queue. }
00207         \}
00208         
00209         incr = queueROOT -> node; \textcolor{comment}{//set node to the first node in the queue}
00210         \textcolor{keywordflow}{while} ( incr -> \hyperlink{structprocess}{process} -> priority <= node -> \hyperlink{structprocess}{process} -> priority  )\{ \textcolor{comment}{//
       Process with the lowest priority goes first }
00211                         \textcolor{keywordflow}{if}( incr->\hyperlink{structpage_a72bca7218659f6f6e4e94cc0bacc26d1}{right} == NULL) \textcolor{keywordflow}{break}; \textcolor{comment}{// if the end is reaached
       quit}
00212                         incr = incr -> right; \textcolor{comment}{// progrees to the right }
00213                         
00214         \}
00215         
00216         \textcolor{comment}{/* There are three cases to check for head, tail, and middle*/}
00217         
00218         \textcolor{comment}{/*head case*/}
00219         \textcolor{comment}{// if new pcb has lower priority than head make it the new head else put 
      it afterwards}
00220         \textcolor{keywordflow}{if} ( incr -> left == NULL && incr-> right == NULL)\{
00221                 \textcolor{keywordflow}{if}( incr -> \hyperlink{structprocess}{process} -> priority <= node -> \hyperlink{structprocess}{process} -> priority )\{
      
00222                         node-> left = incr;
00223                         node-> right = NULL;
00224                         incr->\hyperlink{structpage_a72bca7218659f6f6e4e94cc0bacc26d1}{right} = node;
00225                         queueROOT->\hyperlink{structroot_afa78d0408d4af29e936332a04739d59c}{count} +=1;
00226                 \}\textcolor{keywordflow}{else}\{
00227                         node->\hyperlink{structpage_aea88d51a55db952658327da1995fc8aa}{left} = NULL;
00228                         node->\hyperlink{structpage_a72bca7218659f6f6e4e94cc0bacc26d1}{right} = incr;
00229                         incr->\hyperlink{structpage_aea88d51a55db952658327da1995fc8aa}{left} = node;
00230                         queueROOT -> node = node; \textcolor{comment}{//set queueROOT to new head}
00231                         queueROOT ->\hyperlink{structroot_afa78d0408d4af29e936332a04739d59c}{count} +=1;
00232                 \}
00233                 \textcolor{keywordflow}{return};
00234         \}
00235         \textcolor{keywordflow}{if}( incr -> left == NULL && incr->\hyperlink{structpage_a72bca7218659f6f6e4e94cc0bacc26d1}{right} != NULL )\{ \textcolor{comment}{// sets it after incr}
00236                 node->\hyperlink{structpage_aea88d51a55db952658327da1995fc8aa}{left} = NULL;
00237                 node->\hyperlink{structpage_a72bca7218659f6f6e4e94cc0bacc26d1}{right} = incr;
00238                 incr->\hyperlink{structpage_aea88d51a55db952658327da1995fc8aa}{left} = node;
00239                 queueROOT -> node = node; \textcolor{comment}{//set queueROOT to new head}
00240                 queueROOT ->\hyperlink{structroot_afa78d0408d4af29e936332a04739d59c}{count} +=1;
00241                 \textcolor{keywordflow}{return};
00242         \}
00243         
00244         \textcolor{comment}{/*tail case*/}
00245         \textcolor{comment}{// if new pcb has higher priority make it the new tail}
00246         \textcolor{keywordflow}{if}( incr -> left != NULL && incr->\hyperlink{structpage_a72bca7218659f6f6e4e94cc0bacc26d1}{right} == NULL )\{
00247                 
00248                 \textcolor{keywordflow}{if}( incr -> \hyperlink{structprocess}{process} -> priority <= node -> \hyperlink{structprocess}{process} -> priority )\{
      
00249                         node-> left = incr;
00250                         node-> right = NULL;
00251                         incr->\hyperlink{structpage_a72bca7218659f6f6e4e94cc0bacc26d1}{right} = node;
00252                         queueROOT->\hyperlink{structroot_afa78d0408d4af29e936332a04739d59c}{count} +=1;
00253                         \textcolor{keywordflow}{return};
00254                 \}\textcolor{keywordflow}{else}\{
00255                         incr = incr -> left; \textcolor{comment}{//decrement incr}
00256                         temp1 = incr -> right;
00257                         incr->\hyperlink{structpage_a72bca7218659f6f6e4e94cc0bacc26d1}{right} = node;
00258                         node->\hyperlink{structpage_a72bca7218659f6f6e4e94cc0bacc26d1}{right} = temp1;
00259                         node->\hyperlink{structpage_aea88d51a55db952658327da1995fc8aa}{left} = incr;
00260                         temp1->\hyperlink{structpage_aea88d51a55db952658327da1995fc8aa}{left} = node;
00261                         queueROOT->\hyperlink{structroot_afa78d0408d4af29e936332a04739d59c}{count} +=1;
00262                         \textcolor{keywordflow}{return};
00263                 \}
00264                 
00265         \}
00266         
00267         \textcolor{comment}{/*middle case*/}
00268         \textcolor{comment}{// left-incr-node-right}
00269         \textcolor{keywordflow}{if}( incr -> left != NULL && incr->\hyperlink{structpage_a72bca7218659f6f6e4e94cc0bacc26d1}{right} != NULL)\{
00270                 incr = incr -> left;
00271                 temp1 = incr -> right;
00272                 incr->\hyperlink{structpage_a72bca7218659f6f6e4e94cc0bacc26d1}{right} = node;
00273                 node->\hyperlink{structpage_a72bca7218659f6f6e4e94cc0bacc26d1}{right} = temp1;
00274                 node->\hyperlink{structpage_aea88d51a55db952658327da1995fc8aa}{left} = incr;
00275                 temp1->\hyperlink{structpage_aea88d51a55db952658327da1995fc8aa}{left} = node;
00276                 queueROOT->\hyperlink{structroot_afa78d0408d4af29e936332a04739d59c}{count} +=1;
00277                 \textcolor{keywordflow}{return};
00278         \}
00279 \}
\hypertarget{mpx__r2_8c_source_l00281}{}\hyperlink{mpx__r2_8h_a89d5f57a5b157787f44875a8f27a6233}{00281} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_a58a3e3525ed6385f632835b55ab7d7d1}{insert_FIFO}( \hyperlink{structprocess}{PCB} *PCBpointer, \hyperlink{structroot}{ROOT} *queueROOT)\{ \textcolor{comment}{//FIXME: NO ERROR HANDLING}
00282         \hyperlink{structpage}{ELEM} *node; \textcolor{comment}{// declare node of type element}
00283         \hyperlink{structpage}{ELEM} *incr; \textcolor{comment}{// traverses the queue}
00284         
00285         
00286         node = sys\_alloc\_mem( \textcolor{keyword}{sizeof}(\hyperlink{structpage}{ELEM})); \textcolor{comment}{// allocate Memory for node}
00287         node -> \hyperlink{structprocess}{process} = PCBpointer;\textcolor{comment}{// add the PCB to the node}
00288         
00289         \textcolor{keywordflow}{if}( queueROOT -> node == NULL )\{ \textcolor{comment}{// if this is the first element ever in 
      the queue}
00290                 node -> left = NULL; \textcolor{comment}{// set the link left to null}
00291                 node -> right = NULL;\textcolor{comment}{// set the link right to null}
00292                 queueROOT -> node = node; \textcolor{comment}{// Set the first element in the queue t
      o node of Type Element}
00293                 queueROOT -> count += 1; \textcolor{comment}{// increase count by one}
00294                 \textcolor{keywordflow}{return}; \textcolor{comment}{//exit out first node is in queue.}
00295         \}
00296         
00297         
00298         \textcolor{comment}{/* INSERT INTO THE queue IN FIFO ORDER*/}
00299         incr = queueROOT -> node; \textcolor{comment}{//set node to the first node in the queue}
00300         \textcolor{keywordflow}{while}( incr -> right != NULL )\{
00301                 incr = incr -> right; \textcolor{comment}{// progress forward to the right of the que
      ue}
00302         \}
00303          incr -> right = node;
00304          node -> left = incr; \textcolor{comment}{//set left to previous node}
00305          node -> right = NULL; \textcolor{comment}{// set right to null }
00306          queueROOT -> count += 1; \textcolor{comment}{// increase count by one as the size of the que
      ue has grown by one}
00307          
00308          \textcolor{keywordflow}{return};
00309 
00310 \}
\hypertarget{mpx__r2_8c_source_l00312}{}\hyperlink{mpx__r2_8h_a612a6abcb66c688a32f33abc93ff3990}{00312} \hyperlink{structprocess}{PCB} *\hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}( \textcolor{keywordtype}{char} *name)\{
00313         \hyperlink{structpage}{ELEM} *incr;
00314         incr =  rQueue -> node; \textcolor{comment}{//set node to the first node in the priority queu
      e}
00315         \textcolor{keywordflow}{while} ( strcmp(name,incr -> \hyperlink{structprocess}{process} -> name ) != 0 && incr != NULL)\{ \textcolor{comment}{// P
      rocess with the lowest priority goes first}
00316                         incr= incr -> right; \textcolor{comment}{// progrees to the right }
00317         \}
00318         \textcolor{keywordflow}{if} (incr == NULL )\{
00319         incr =  wsQueue -> node; \textcolor{comment}{//set node to the first node in the  FIFO queue}
00320         \textcolor{keywordflow}{while} ( strcmp(name,incr -> \hyperlink{structprocess}{process} -> name ) != 0 && incr != NULL)\{ \textcolor{comment}{// P
      rocess with the lowest priority goes first}
00321                         incr= incr -> right; \textcolor{comment}{// progrees to the right }
00322         \}
00323         \}
00324         \textcolor{keywordflow}{if} ( incr -> \hyperlink{structprocess}{process} != NULL && incr != NULL )\{
00325                 \textcolor{keywordflow}{return} incr->\hyperlink{structpage_af3cc0e1320b79159b230f154f1a95f0d}{process};
00326         \}\textcolor{keywordflow}{else}\{
00327                 \textcolor{keywordflow}{return} NULL;
00328         \}
00329 
00330 \}
\hypertarget{mpx__r2_8c_source_l00332}{}\hyperlink{mpx__r2_8c_af30a3658210d449b4b53e5be2ed2bc2e}{00332} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_af30a3658210d449b4b53e5be2ed2bc2e}{remove_PCB}( \hyperlink{structprocess}{PCB} *\hyperlink{structprocess}{process} )\{
00333         \hyperlink{structroot}{ROOT} *queue;
00334         \hyperlink{structpage}{ELEM} *incr; \textcolor{comment}{// traverses queue}
00335         \hyperlink{structpage}{ELEM} *temp1; \textcolor{comment}{// used to hold left and right pcb}
00336         \hyperlink{structpage}{ELEM} *temp2;
00337         
00338         \textcolor{keywordflow}{if}( \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}( process-> name ) == NULL )\{ \textcolor{comment}{//case where pcb is not in queu
      e}
00339                 \hyperlink{mpx__r2_8c_a79890f055b1d0fccf1962bbde4877caa}{free_PCB}(process); \textcolor{comment}{//deallocate mem}
00340                 \textcolor{keywordflow}{return}; \textcolor{comment}{// return}
00341         \}
00342         
00343         \textcolor{keywordflow}{if} ( process -> state == \hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY} || process -> state == \hyperlink{mpx__r2_8h_a6fb7181d994ee98e735494be55809708}{RUNNING} )\{
00344                 queue = rQueue;
00345         \}
00346         \textcolor{keywordflow}{if}( process -> state == \hyperlink{mpx__r2_8h_a48f6457243719e7031768d4100741159}{BLOCKED} || 
00347                 process -> state == \hyperlink{mpx__r2_8h_a07b1141143e8825b04670da23fca8cc7}{SUSPENDED_READY} || 
00348                 process -> state == \hyperlink{mpx__r2_8h_a6e41bb5a80c5049e8d364bab8ee4d73a}{SUSPENDED_BLOCKED} )\{
00349                 queue = wsQueue;
00350         \}
00351         \textcolor{comment}{/* last in queue */}
00352         \textcolor{keywordflow}{if} ( queue -> count == 1 )\{
00353                 incr = queue-> node;
00354                \textcolor{comment}{//       free\_PCB(incr->process);}
00355                 \textcolor{comment}{//sys\_free\_mem(queue->node);}
00356                 queue -> node = NULL;
00357                 queue -> count -=1;
00358                 
00359                 \textcolor{keywordflow}{return};
00360         \}
00361         incr = queue-> node; \textcolor{comment}{//set node to the first node in the queue}
00362         \textcolor{keywordflow}{while} ( (incr -> process != process ) && incr != NULL )\{ \textcolor{comment}{// find the same
       process}
00363                         incr = incr -> right; \textcolor{comment}{// progrees to the right }
00364         \}
00365         \textcolor{comment}{/* There are three cases to check for head, tail, and middle*/}
00366         
00367         
00368         
00369         \textcolor{comment}{/*head case*/}
00370         \textcolor{keywordflow}{if}( incr -> left == NULL && incr->\hyperlink{structpage_a72bca7218659f6f6e4e94cc0bacc26d1}{right} != NULL )\{ 
00371                 temp1 = incr -> right;
00372                 temp1 -> left  = NULL;
00373                 queue -> node = temp1; \textcolor{comment}{//set queueROOT to new head}
00374                 queue ->\hyperlink{structroot_afa78d0408d4af29e936332a04739d59c}{count} -=1;
00375         \}
00376         
00377         \textcolor{comment}{/*tail case*/}
00378         \textcolor{keywordflow}{if}( incr -> left != NULL && incr->\hyperlink{structpage_a72bca7218659f6f6e4e94cc0bacc26d1}{right} == NULL )\{
00379                 temp1 = incr-> left;
00380                 temp1 -> right  = NULL;
00381                 queue -> count -=1;
00382         \}
00383         
00384         \textcolor{comment}{/*middle case*/}
00385         \textcolor{keywordflow}{if}( incr -> left != NULL && incr->\hyperlink{structpage_a72bca7218659f6f6e4e94cc0bacc26d1}{right} != NULL)\{
00386                 temp1 = incr -> left;
00387                 temp1 -> right = incr -> right;
00388                 temp2 = incr -> right;
00389                 temp2 -> left = incr -> left;
00390                 queue -> count -=1;
00391         \}
00392         \textcolor{comment}{//Deallocate mem}
00393         \textcolor{comment}{//free\_PCB(process);}
00394         \textcolor{comment}{//sys\_free\_mem(incr); //what will this do if incr is null}
00395         
00396         \textcolor{keywordflow}{return};
00397         \}
00398 
00400 \textcolor{comment}{// it prompts the user for information then attempts to allocate and setup the pc
      b then insert in the queue}
\hypertarget{mpx__r2_8c_source_l00401}{}\hyperlink{mpx__r2_8h_a782285c58822e411fb75be1e65fe1104}{00401} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_a782285c58822e411fb75be1e65fe1104}{mpxcmd_create_PCB}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{
00402         \textcolor{keywordtype}{char} name[STRLEN];
00403         \textcolor{keywordtype}{char} line[MAX\_LINE];
00404         \textcolor{keywordtype}{int} type;
00405         \textcolor{keywordtype}{int} priority;
00406 
00407         \hyperlink{structprocess}{PCB} *newPCB = \hyperlink{mpx__r2_8c_a58a8a1ea0a96b9ecf0be29179a5a0a1e}{allocate_PCB}();
00408         
00409         printf(\textcolor{stringliteral}{"Process Name: \(\backslash\)n"});
00410         \hyperlink{mpx__util_8c_a781169ab05ad54c0d37253d73060b77f}{mpx_readline}(name, \hyperlink{mpx__r2_8h_a278cf415676752815cfb411cb0b32802}{STRLEN});
00411         printf(\textcolor{stringliteral}{"Process Class Type ( Application 0 or System  1): \(\backslash\)n"} );
00412         type= \hyperlink{mpx__util_8c_aacc3dfe470919b0bd1133bce90383e18}{mpxprompt_int}();
00413         printf(\textcolor{stringliteral}{"Process Priority (-128 to 127): \(\backslash\)n"});
00414         priority = \hyperlink{mpx__util_8c_aacc3dfe470919b0bd1133bce90383e18}{mpxprompt_int}();
00415         
00416         
00417         
00418         \textcolor{keywordflow}{if} ( \hyperlink{mpx__r2_8c_a316c9619aba53c03c17afbc0a0dbf096}{setup_PCB}(newPCB,&name,type,\hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY},priority) == 1)\{
00419                 printf(\textcolor{stringliteral}{"Incrorrect information entered."});
00420                 \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00421                 \textcolor{keywordflow}{return};
00422         \}       
00423         
00424         \hyperlink{mpx__r2_8c_aa3b334e3a5afd6e590917667ad359a6f}{insert_PCB}(newPCB);
00425         
00426 \}
00427 
00429 \textcolor{comment}{//PCB *copy\_PCB(PCB *pointer)\{}
00430 \textcolor{comment}{//              PCB *tempPCB = allocate\_PCB();}
00431 \textcolor{comment}{//              tempPCB -> state = pointer -> state;}
00432 \textcolor{comment}{//              tempPCB -> classType = pointer -> classType;}
00433 \textcolor{comment}{//              strcpy(tempPCB->name, pointer -> name);}
00434 \textcolor{comment}{//              tempPCB -> priority = pointer ->priority;}
00435 \textcolor{comment}{//              }
00436 \textcolor{comment}{//              // MEMDSC copy}
00437 \textcolor{comment}{//              tempPCB -> memdsc -> size = pointer -> memdsc -> size;}
00438 \textcolor{comment}{//              tempPCB -> memdsc -> loadADDR = pointer -> memdsc -> loadADDR;}
00439 \textcolor{comment}{//              tempPCB -> memdsc -> execADDR = pointer -> memdsc -> execADDR;}
00440 \textcolor{comment}{//              }
00441 \textcolor{comment}{//              //STACKDSC copy}
00442 \textcolor{comment}{//              memcpy(tempPCB->stackdsc->base,pointer -> stackdsc -> base, STACK
      SIZE);}
00443 \textcolor{comment}{//              }
00444 \textcolor{comment}{//      return tempPCB;}
00445 \textcolor{comment}{//\}}
00446 
\hypertarget{mpx__r2_8c_source_l00448}{}\hyperlink{mpx__r2_8h_ae6d6afa9fefa158029528a24841c453a}{00448} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_ae6d6afa9fefa158029528a24841c453a}{mpxcmd_delete_PCB}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{
00449         \textcolor{keywordflow}{if} (argc == 2)\{
00450         \textcolor{keywordtype}{char} name[STRLEN];
00451         \hyperlink{structprocess}{PCB} *pointer;
00452         strcpy(name,argv[1]);
00453         
00454         pointer = \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}(name);
00455         
00456         \textcolor{keywordflow}{if} ( pointer != NULL)\{
00457                 \hyperlink{mpx__r2_8c_af30a3658210d449b4b53e5be2ed2bc2e}{remove_PCB}(pointer);
00458         \}\textcolor{keywordflow}{else}\{
00459                 printf(\textcolor{stringliteral}{"Process Name not found!"});
00460                 \textcolor{keywordflow}{return};
00461         \}
00462         \}
00463 \}
00464 
\hypertarget{mpx__r2_8c_source_l00466}{}\hyperlink{mpx__r2_8h_ae8eb72663ecff92c27ab06e3560fd0d4}{00466} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_ae8eb72663ecff92c27ab06e3560fd0d4}{mpxcmd_block}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{
00467         \textcolor{keywordflow}{if}(argc==2)\{
00468                 \textcolor{keywordtype}{char} name[STRLEN];
00469                 
00470                 \hyperlink{structprocess}{PCB} *pointer;
00471                 \hyperlink{structprocess}{PCB} *tempPCB;
00472                 \textcolor{keywordtype}{int} buffs = STRLEN;
00473                 
00474                 strcpy(name,argv[1]);
00475                 
00476                 tempPCB = \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}(name);
00477                 \textcolor{keywordflow}{if} ( tempPCB != NULL)\{
00478                         \textcolor{comment}{//tempPCB = copy\_PCB(pointer);}
00479                         \hyperlink{mpx__r2_8c_af30a3658210d449b4b53e5be2ed2bc2e}{remove_PCB}(tempPCB);
00480                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY} || tempPCB -> state == 
      \hyperlink{mpx__r2_8h_a6fb7181d994ee98e735494be55809708}{RUNNING} ) tempPCB -> state = BLOCKED;
00481                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_a07b1141143e8825b04670da23fca8cc7}{SUSPENDED_READY} ) tempPCB -> stat
      e = SUSPENDED\_BLOCKED;
00482                         \hyperlink{mpx__r2_8c_aa3b334e3a5afd6e590917667ad359a6f}{insert_PCB}(tempPCB);
00483                 \}\textcolor{keywordflow}{else}\{
00484                         printf(\textcolor{stringliteral}{"Process Name not found!"});
00485                         \textcolor{keywordflow}{return};
00486                 \}
00487         \}
00488         \textcolor{keywordflow}{else}\{
00489                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});       
00490                 \textcolor{keywordflow}{return};
00491         \}       
00492 \}
00493 
\hypertarget{mpx__r2_8c_source_l00495}{}\hyperlink{mpx__r2_8h_a1363a7b6156a84057936c3fd91d91f69}{00495} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_a1363a7b6156a84057936c3fd91d91f69}{mpxcmd_unblock}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{
00496         \textcolor{keywordflow}{if}(argc==2)\{
00497                 \textcolor{keywordtype}{char} name[STRLEN];
00498                 \hyperlink{structprocess}{PCB} *pointer;
00499                 \hyperlink{structprocess}{PCB} *tempPCB;
00500                 \textcolor{keywordtype}{int} buffs = STRLEN;
00501                 
00502                 strcpy(name,argv[1]);
00503                 
00504                 tempPCB = \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}(name);
00505                 \textcolor{keywordflow}{if} ( tempPCB != NULL)\{
00506                         \textcolor{comment}{//tempPCB = copy\_PCB(pointer);}
00507                         \hyperlink{mpx__r2_8c_af30a3658210d449b4b53e5be2ed2bc2e}{remove_PCB}(tempPCB);
00508                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_a48f6457243719e7031768d4100741159}{BLOCKED} ) tempPCB -> state = READ
      Y;
00509                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_a6e41bb5a80c5049e8d364bab8ee4d73a}{SUSPENDED_BLOCKED} ) tempPCB -> st
      ate = SUSPENDED\_READY;
00510                         \hyperlink{mpx__r2_8c_aa3b334e3a5afd6e590917667ad359a6f}{insert_PCB}(tempPCB);
00511                 \}\textcolor{keywordflow}{else}\{
00512                         printf(\textcolor{stringliteral}{"Process Name not found!"});
00513                         \textcolor{keywordflow}{return};
00514                 \}
00515         \}
00516         \textcolor{keywordflow}{else}\{
00517                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});       
00518                 \textcolor{keywordflow}{return};
00519         \}
00520 \}
00521 
\hypertarget{mpx__r2_8c_source_l00523}{}\hyperlink{mpx__r2_8h_a697f0f432dba18606d9e514eda9cd073}{00523} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_a697f0f432dba18606d9e514eda9cd073}{mpxcmd_suspend}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{
00524         \textcolor{keywordflow}{if}(argc==2)\{
00525                 \textcolor{keywordtype}{char} name[STRLEN];
00526                 \hyperlink{structprocess}{PCB} *pointer;
00527                 \hyperlink{structprocess}{PCB} *tempPCB;
00528                 \textcolor{keywordtype}{int} buffs = STRLEN;
00529                 strcpy(name,argv[1]);
00530                 
00531                 tempPCB = \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}(name);
00532                 \textcolor{keywordflow}{if} ( tempPCB != NULL)\{
00533                         \textcolor{comment}{//tempPCB = copy\_PCB(tempPCB);}
00534                         \hyperlink{mpx__r2_8c_af30a3658210d449b4b53e5be2ed2bc2e}{remove_PCB}(tempPCB);
00535                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY} || tempPCB -> state == 
      \hyperlink{mpx__r2_8h_a6fb7181d994ee98e735494be55809708}{RUNNING} ) tempPCB -> state = SUSPENDED\_READY;
00536                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_a48f6457243719e7031768d4100741159}{BLOCKED} ) tempPCB -> state = SUSP
      ENDED\_BLOCKED;
00537                         \hyperlink{mpx__r2_8c_aa3b334e3a5afd6e590917667ad359a6f}{insert_PCB}(tempPCB);
00538                 \}\textcolor{keywordflow}{else}\{
00539                         printf(\textcolor{stringliteral}{"Process Name not found!"});
00540                         \textcolor{keywordflow}{return};
00541                 \}
00542         \}
00543         \textcolor{keywordflow}{else}\{
00544                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});       
00545                 \textcolor{keywordflow}{return};
00546         \}
00547 \}
00548 
\hypertarget{mpx__r2_8c_source_l00550}{}\hyperlink{mpx__r2_8h_a3c47daf087934d234d896e35e4c03f3b}{00550} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_a3c47daf087934d234d896e35e4c03f3b}{mpxcmd_resume}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{
00551         \textcolor{keywordflow}{if}(argc==2)\{
00552                 \textcolor{keywordtype}{char} name[STRLEN];
00553                 \hyperlink{structprocess}{PCB} *pointer;
00554                 \hyperlink{structprocess}{PCB} *tempPCB;
00555                 \textcolor{keywordtype}{int} buffs = STRLEN;
00556                 
00557                 strcpy(name,argv[1]);
00558                 
00559                 tempPCB = \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}(name);
00560                 \textcolor{keywordflow}{if} ( pointer != NULL)\{
00561                         \textcolor{comment}{//tempPCB = copy\_PCB(pointer);}
00562                         \hyperlink{mpx__r2_8c_af30a3658210d449b4b53e5be2ed2bc2e}{remove_PCB}(tempPCB);
00563                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_a07b1141143e8825b04670da23fca8cc7}{SUSPENDED_READY} ) tempPCB -> stat
      e = READY;
00564                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_a6e41bb5a80c5049e8d364bab8ee4d73a}{SUSPENDED_BLOCKED} ) tempPCB -> st
      ate = BLOCKED;
00565                         \hyperlink{mpx__r2_8c_aa3b334e3a5afd6e590917667ad359a6f}{insert_PCB}(tempPCB);
00566                 \}\textcolor{keywordflow}{else}\{
00567                         printf(\textcolor{stringliteral}{"Process Name not found!"});
00568                         \textcolor{keywordflow}{return};
00569                 \}
00570         \}
00571         \textcolor{keywordflow}{else}\{
00572                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});       
00573                 \textcolor{keywordflow}{return};
00574         \}
00575 \}
00576 
\hypertarget{mpx__r2_8c_source_l00578}{}\hyperlink{mpx__r2_8h_a4505a685b9ab69940541dc4e973e0f01}{00578} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_a4505a685b9ab69940541dc4e973e0f01}{mpxcmd_setPriority}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{ 
00579         \textcolor{keywordflow}{if}(argc==3)\{
00580                 \textcolor{keywordtype}{char} name[STRLEN];
00581                 \hyperlink{structprocess}{PCB} *pointer;
00582                 \textcolor{keywordtype}{int} priority;
00583                 \hyperlink{structprocess}{PCB} *tempPCB;
00584                 \textcolor{keywordtype}{int} buffs = STRLEN;
00585                 priority  = atoi(argv[2]);
00586                 strcpy(name,argv[1]);
00587                 \textcolor{keywordflow}{if}( priority <= 128 || priority >= -127)\{ ;\}\textcolor{keywordflow}{else}\{
00588                         printf(\textcolor{stringliteral}{"Number entered out of range!"});
00589                         \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00590                         \textcolor{keywordflow}{return};
00591                 \}
00592                 tempPCB = \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}(name);
00593                 \textcolor{keywordflow}{if} ( tempPCB != NULL)\{
00594                         tempPCB -> priority = priority;
00595                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY} )\{
00596                                         \textcolor{comment}{//tempPCB = copy\_PCB(pointer);}
00597                                         \hyperlink{mpx__r2_8c_af30a3658210d449b4b53e5be2ed2bc2e}{remove_PCB}(tempPCB);
00598                                         \hyperlink{mpx__r2_8c_aa3b334e3a5afd6e590917667ad359a6f}{insert_PCB}(tempPCB);
00599                                         \}
00600                 \}\textcolor{keywordflow}{else}\{
00601                         printf(\textcolor{stringliteral}{"Process Name not found!"});
00602                         \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00603                         \textcolor{keywordflow}{return};
00604                 \}
00605         \}
00606         \textcolor{keywordflow}{else}\{
00607                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});
00608                 \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00609                 \textcolor{keywordflow}{return};
00610         \}
00611 \}
00612 
00613 
\hypertarget{mpx__r2_8c_source_l00615}{}\hyperlink{mpx__r2_8h_ae52d77243725636a3b23d05235fee141}{00615} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_ae52d77243725636a3b23d05235fee141}{mpxcmd_show_PCB}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{
00616         \textcolor{keywordflow}{if}(argc==2)\{
00617                 \textcolor{keywordtype}{char} name[STRLEN];
00618                 \hyperlink{structprocess}{PCB} *pointer;
00619                 \textcolor{keywordtype}{char} \textcolor{keyword}{class}[30];
00620                 \textcolor{keywordtype}{char} state[45];
00621                 \textcolor{keywordtype}{int} buffs = STRLEN;
00622                 \textcolor{keywordtype}{char} line[MAX\_LINE];
00623                 \textcolor{keywordtype}{char}* lp;
00624                 lp = &line;
00625                 
00626                 strcpy(name,argv[1]);
00627                 
00628                 pointer = \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}(name);
00629                 
00630                 \textcolor{keywordflow}{if} ( pointer != NULL)\{
00631                         printf(\textcolor{stringliteral}{"%s\(\backslash\)n"},\hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{string_PCB}(pointer));  
00632                         \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00633                 \}\textcolor{keywordflow}{else}\{
00634                         printf(\textcolor{stringliteral}{"Process Name not found!"});
00635                         \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00636                         \textcolor{keywordflow}{return};
00637                 \}
00638         \}
00639         \textcolor{keywordflow}{else}\{
00640                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});
00641                 \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00642                 \textcolor{keywordflow}{return};
00643         \}
00644 \}
00645 
\hypertarget{mpx__r2_8c_source_l00647}{}\hyperlink{mpx__r2_8h_a69559f93fe1b569abf6e846a426191a9}{00647} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_a69559f93fe1b569abf6e846a426191a9}{mpxcmd_showAll_PCB}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{ \textcolor{comment}{// Pagination function needs add
      ed !!Function still needs work!!}
00648         \textcolor{keywordflow}{if}(argc==1)\{
00649                 \hyperlink{structpage}{ELEM} *incr;
00650                 \hyperlink{structprocess}{PCB} *pointer;
00651                 \textcolor{keywordtype}{char} line[MAX\_LINE];
00652                 \textcolor{keywordtype}{char}* lp;
00653                 \textcolor{keywordtype}{char} \textcolor{keyword}{class}[30];
00654                 \textcolor{keywordtype}{char} state[45];
00655                 \textcolor{comment}{//set node to the first node in the queue}
00656                 lp = &line;
00657                 \hyperlink{mpx__util_8c_a60afdb7496b6ff469c6b98d2ecde15ed}{mpx_pager_init}(\textcolor{stringliteral}{" All PCB's In Queue:\(\backslash\)n --------------------------
      ---------------------------\(\backslash\)n"});
00658                 
00659                 \textcolor{keywordflow}{if}( rQueue -> count > 0 )\{
00660                 incr = rQueue -> node;
00661                 \textcolor{keywordflow}{while}( incr != NULL )\{
00662                         
00663                         pointer = incr -> \hyperlink{structprocess}{process};
00664                 
00665                         lp = \hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{string_PCB}(pointer);
00666                         \hyperlink{mpx__util_8c_a9e59881f10bd91d7255f18f205e101e6}{mpx_pager}(lp);
00667                         
00668                         incr = incr -> right; \textcolor{comment}{// progress forward to the right of
       the queue}
00669                 \}
00670             \} 
00671                 \textcolor{keywordflow}{if}(wsQueue -> count > 0)\{
00672                 incr = wsQueue -> node;
00673                 \textcolor{keywordflow}{while}( incr != NULL )\{
00674                         pointer = incr -> \hyperlink{structprocess}{process};
00675                 
00676                         
00677                         lp = \hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{string_PCB}(pointer);
00678                         \hyperlink{mpx__util_8c_a9e59881f10bd91d7255f18f205e101e6}{mpx_pager}(lp);
00679                         
00680                         incr = incr -> right; \textcolor{comment}{// progress forward to the right of
       the queue}
00681                 \}
00682                 \}
00683         \}
00684         \textcolor{keywordflow}{else}\{
00685                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});       
00686                 \textcolor{keywordflow}{return};
00687         \}
00688         \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00689 \}
00690 
\hypertarget{mpx__r2_8c_source_l00692}{}\hyperlink{mpx__r2_8h_aeaac6d37294f767e31c3789971c5ecd4}{00692} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_aeaac6d37294f767e31c3789971c5ecd4}{mpxcmd_showReady_PCB}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{ \textcolor{comment}{// Pagination function needs a
      dded !!Function still needs work!!}
00693         \textcolor{keywordflow}{if}(argc==1)\{
00694                 \hyperlink{structpage}{ELEM} *incr;
00695                 \hyperlink{structprocess}{PCB} *pointer;
00696                 \textcolor{keywordtype}{char} line[MAX\_LINE];
00697                 \textcolor{keywordtype}{char}* lp;
00698                 \textcolor{keywordtype}{char} \textcolor{keyword}{class}[30];
00699                 \textcolor{keywordtype}{char} state[45];
00700                 incr = rQueue -> node;\textcolor{comment}{//set node to the first node in the queue}
00701                 lp = &line;
00702                 \hyperlink{mpx__util_8c_a60afdb7496b6ff469c6b98d2ecde15ed}{mpx_pager_init}(\textcolor{stringliteral}{" All PCB's Ready State in Queues:\(\backslash\)n -------------
      ----------------------------------------\(\backslash\)n"});
00703                 \textcolor{keywordflow}{while}( incr != NULL )\{
00704                         
00705                         pointer = incr -> \hyperlink{structprocess}{process};
00706                         \textcolor{keywordflow}{if} ( pointer -> state == \hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY})\{
00707                         lp = \hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{string_PCB}(pointer);
00708                         \hyperlink{mpx__util_8c_a9e59881f10bd91d7255f18f205e101e6}{mpx_pager}(lp);
00709                         \}
00710                         incr = incr -> right; \textcolor{comment}{// progress forward to the right of
       the queue}
00711                 \}
00712                 
00713                 incr = wsQueue -> node;\textcolor{comment}{//set node to the first node in the queue}
00714                 \textcolor{keywordflow}{while}( incr != NULL )\{
00715                         pointer = incr -> \hyperlink{structprocess}{process};
00716                         \textcolor{keywordflow}{if} ( pointer -> state == \hyperlink{mpx__r2_8h_a07b1141143e8825b04670da23fca8cc7}{SUSPENDED_READY})\{
00717                         lp = \hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{string_PCB}(pointer);
00718                         \hyperlink{mpx__util_8c_a9e59881f10bd91d7255f18f205e101e6}{mpx_pager}(lp);
00719                         \}
00720                         incr = incr -> right; \textcolor{comment}{// progress forward to the right of
       the queue                      incr = incr -> right; // progress forward to the 
      right of the queue}
00721                 \}
00722         \}
00723         \textcolor{keywordflow}{else}\{
00724                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});       
00725                 \textcolor{keywordflow}{return};
00726         \}
00727         \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00728 \}
00729 
\hypertarget{mpx__r2_8c_source_l00731}{}\hyperlink{mpx__r2_8h_ae1ef92a5e3a8869ec269a23b3b854c9b}{00731} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_ae1ef92a5e3a8869ec269a23b3b854c9b}{mpxcmd_showBlocked_PCB}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{ \textcolor{comment}{// Pagination function needs
       added !!Function still needs work!!}
00732         \textcolor{keywordflow}{if}(argc==1)\{
00733                 \hyperlink{structpage}{ELEM} *incr;
00734                 \hyperlink{structprocess}{PCB} *pointer;
00735                 \textcolor{keywordtype}{char} line[MAX\_LINE];
00736                 \textcolor{keywordtype}{char}* lp;
00737                 \textcolor{keywordtype}{char} \textcolor{keyword}{class}[30];
00738                 \textcolor{keywordtype}{char} state[45];
00739                 lp = &line;
00740                 \hyperlink{mpx__util_8c_a60afdb7496b6ff469c6b98d2ecde15ed}{mpx_pager_init}(\textcolor{stringliteral}{" All PCB's Blocked State in Queues:\(\backslash\)n -----------
      ------------------------------------------\(\backslash\)n"});
00741                 
00742                 incr = wsQueue -> node;\textcolor{comment}{//set node to the first node in the queue}
00743                 \textcolor{keywordflow}{while}( incr  != NULL )\{
00744                         pointer = incr -> \hyperlink{structprocess}{process};
00745                         \textcolor{keywordflow}{if} ( pointer -> state == \hyperlink{mpx__r2_8h_a6e41bb5a80c5049e8d364bab8ee4d73a}{SUSPENDED_BLOCKED} || pointer -> 
      state == \hyperlink{mpx__r2_8h_a48f6457243719e7031768d4100741159}{BLOCKED} )\{
00746                         lp = \hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{string_PCB}(pointer);
00747                         \hyperlink{mpx__util_8c_a9e59881f10bd91d7255f18f205e101e6}{mpx_pager}(lp);
00748                         \}
00749                         incr = incr -> right; \textcolor{comment}{// progress forward to the right of
       the queue                      incr = incr -> right; // progress forward to the 
      right of the queue}
00750                 \}
00751         \}
00752         \textcolor{keywordflow}{else}\{
00753                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});       
00754                 \textcolor{keywordflow}{return};
00755         \}
00756         \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00757 \}       
00758 
00759 
\end{DoxyCode}
