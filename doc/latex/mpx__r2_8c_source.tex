\hypertarget{mpx__r2_8c_source}{
\section{src/mpx\_\-r2.c}
}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#include "\hyperlink{mpx__r2_8h}{mpx_r2.h}"}
00002 \textcolor{preprocessor}{#include "mpx\_supt.h"}
00003 \textcolor{preprocessor}{#include "mystdlib.h"}
00004 \textcolor{preprocessor}{#include "\hyperlink{mpx__util_8h}{mpx_util.h}"}
00005 \textcolor{preprocessor}{#include <string.h>}
00006 \textcolor{preprocessor}{#include <stdio.h>}
00007 
00008 
\hypertarget{mpx__r2_8c_source_l00009}{}\hyperlink{mpx__r2_8c_afe54c168944e64a28d76b6e4d3abb391}{00009} \hyperlink{structroot}{ROOT} *\hyperlink{mpx__r2_8c_afe54c168944e64a28d76b6e4d3abb391}{rQueue}; \textcolor{comment}{// Remember to reserve memory for these}
\hypertarget{mpx__r2_8c_source_l00010}{}\hyperlink{mpx__r2_8c_ac4950750e25f86d7ee69d6bcca87ef5f}{00010} \hyperlink{structroot}{ROOT} *\hyperlink{mpx__r2_8c_ac4950750e25f86d7ee69d6bcca87ef5f}{wsQueue};
00011 
00012 
\hypertarget{mpx__r2_8c_source_l00016}{}\hyperlink{mpx__r2_8c_a58a8a1ea0a96b9ecf0be29179a5a0a1e}{00016} \hyperlink{structprocess}{PCB} *\hyperlink{mpx__r2_8c_a58a8a1ea0a96b9ecf0be29179a5a0a1e}{allocate_PCB}( \textcolor{keywordtype}{void} )\{
00017         \hyperlink{structprocess}{PCB} *newPCB; 
00018         \textcolor{keywordtype}{int} i;
00019         \hyperlink{structmem}{MEMDSC} *newMemDsc;
00020         \hyperlink{structstack}{STACKDSC} *newStackDsc;
00021         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *\hyperlink{structstack}{stack}; 
00022         
00023         
00024         \textcolor{comment}{// Allocate memory to each of the disctenct parts of the PCB}
00025         newStackDsc = (\hyperlink{structstack}{STACKDSC}*) sys\_alloc\_mem(\textcolor{keyword}{sizeof}(\hyperlink{structstack}{STACKDSC}));
00026         newMemDsc = (\hyperlink{structmem}{MEMDSC}*) sys\_alloc\_mem(\textcolor{keyword}{sizeof}(\hyperlink{structmem}{MEMDSC}));
00027         newPCB = (\hyperlink{structprocess}{PCB}*) sys\_alloc\_mem(\textcolor{keyword}{sizeof}(\hyperlink{structprocess}{PCB}));
00028         stack = (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}*) sys\_alloc\_mem(\hyperlink{mpx__r2_8h_a21d9543c516fffee84a7963224271f95}{STACKSIZE}*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}));
00029         
00030         \textcolor{keywordflow}{if} ( stack == NULL || 
00031                  newStackDsc == NULL || 
00032                  newMemDsc == NULL || 
00033                  newPCB == NULL ) \textcolor{keywordflow}{return} NULL;
00034         
00035         \textcolor{comment}{//Setup Memory Descriptor with Default Values for Module 2}
00036         newMemDsc -> size = 0;
00037         newMemDsc -> loadADDR = NULL;
00038         newMemDsc -> execADDR = NULL;
00039         
00040         \textcolor{comment}{//Setup the Stack}
00041 
00042         memset(stack,0,\hyperlink{mpx__r2_8h_a21d9543c516fffee84a7963224271f95}{STACKSIZE}*\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}));\textcolor{comment}{//ZERO out Stack to aid i
      n debug....}
00043         newStackDsc -> base = stack; \textcolor{comment}{// x86 arch Stacks start at the Higest value
       }
00044         newStackDsc -> top  = stack[\hyperlink{mpx__r2_8h_a21d9543c516fffee84a7963224271f95}{STACKSIZE}-1];\textcolor{comment}{// and go to lowest or n - 2 for
       Word alloc }
00045         
00046         \textcolor{comment}{//Bundling Opereations of Stack Descripter Bellow}
00047         newPCB -> stackdsc = newStackDsc;  \textcolor{comment}{// stack descriptor is placed in the P
      CB}
00048         
00049         \textcolor{comment}{//Bundling Operations of Memory Descriptor }
00050         newPCB -> memdsc = newMemDsc; \textcolor{comment}{// memory descriptor is placed in the PCB}
00051         
00052         \textcolor{keywordflow}{return} newPCB;
00053         
00054 \};
\hypertarget{mpx__r2_8c_source_l00058}{}\hyperlink{mpx__r2_8h_a79890f055b1d0fccf1962bbde4877caa}{00058} \textcolor{keywordtype}{int} \hyperlink{mpx__r2_8c_a79890f055b1d0fccf1962bbde4877caa}{free_PCB}( \hyperlink{structprocess}{PCB} *pointer \textcolor{comment}{/*< [in] is a pointer to a PCB  */} )\{
00059         \hyperlink{structstack}{STACKDSC} *stackdscptr = pointer -> stackdsc;
00060         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} *\hyperlink{structstack}{stack} = stackdscptr -> base;
00061         \hyperlink{structmem}{MEMDSC} *memptr = pointer -> memdsc;
00062         
00063         \textcolor{keywordtype}{int} err;
00064         
00065         \textcolor{comment}{//Free Stack First}
00066         err = sys\_free\_mem(stack);
00067         \textcolor{keywordflow}{if}( err < 0 ) \textcolor{keywordflow}{return} err;
00068         \textcolor{comment}{//Second free Stack Descriptor}
00069         err = sys\_free\_mem(stackdscptr);
00070         \textcolor{keywordflow}{if}( err < 0 ) \textcolor{keywordflow}{return} err;
00071         \textcolor{comment}{//Third free Memory Descriptor}
00072         err = sys\_free\_mem(memptr);
00073         \textcolor{keywordflow}{if}( err < 0 ) \textcolor{keywordflow}{return} err;
00074         \textcolor{comment}{//Finaly free Process Control block}
00075         err = sys\_free\_mem(pointer);
00076         \textcolor{keywordflow}{if}(err < 0 ) \textcolor{keywordflow}{return} err;
00077         
00078         \textcolor{keywordflow}{return} 0; \textcolor{comment}{//freed mem ok}
00079 \}
00080 
00082 \textcolor{comment}{//FIXME: Move to allocate, Create to setup}
\hypertarget{mpx__r2_8c_source_l00083}{}\hyperlink{mpx__r2_8h_a48d816fd79ba99118f2dff84d84395f5}{00083} \textcolor{keywordtype}{int} \hyperlink{mpx__r2_8c_a316c9619aba53c03c17afbc0a0dbf096}{setup_PCB}( \hyperlink{structprocess}{PCB} *pointer, \textcolor{keywordtype}{char} *Name, \textcolor{keywordtype}{int} classType, \textcolor{keywordtype}{int} state, \textcolor{keywordtype}{int} priority )
      \{\textcolor{comment}{//FIXME: NO DATA VV}
00084         \textcolor{keywordtype}{int} ret;
00085         \textcolor{keywordtype}{char} *name = pointer -> name;
00086         ret = 0;
00087         strcpy(name,Name);
00088         
00089         \textcolor{keywordflow}{if}( \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}(name) == NULL)\{
00090                 \textcolor{keywordflow}{if}( classType == 1 || classType == 0 )\{
00091                         pointer -> classType = classType;
00092                 \}\textcolor{keywordflow}{else}\{
00093                         ret = 1;
00094                 \}
00095                  \textcolor{keywordflow}{if}( state == \hyperlink{mpx__r2_8h_a48f6457243719e7031768d4100741159}{BLOCKED} || 
00096                          state == \hyperlink{mpx__r2_8h_a07b1141143e8825b04670da23fca8cc7}{SUSPENDED_READY} || 
00097                      state == \hyperlink{mpx__r2_8h_a6e41bb5a80c5049e8d364bab8ee4d73a}{SUSPENDED_BLOCKED} ||
00098                          state == \hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY} || 
00099                          state == \hyperlink{mpx__r2_8h_a6fb7181d994ee98e735494be55809708}{RUNNING} )
00100                 \{
00101                 pointer -> state = state;
00102                 \}\textcolor{keywordflow}{else}\{
00103                         ret = 1;
00104                 \}
00105                 \textcolor{keywordflow}{if}( priority <= 127 && priority >= -128)\{
00106                         pointer -> priority = priority;
00107                 \}\textcolor{keywordflow}{else}\{
00108                         ret = 1;
00109                 \}
00110         \}\textcolor{keywordflow}{else}\{
00111                 ret = 1;
00112         \}
00113         \textcolor{keywordflow}{return} ret;
00114 \}
\hypertarget{mpx__r2_8c_source_l00116}{}\hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{00116} \textcolor{keywordtype}{char} *\hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{string_PCB}( \hyperlink{structprocess}{PCB} *pointer)\{
00117         \textcolor{keywordtype}{char} line\_buf[MAX\_LINE];
00118         \textcolor{keywordtype}{char} *name = pointer -> name;
00119         \textcolor{keywordtype}{signed} \textcolor{keywordtype}{char} *classType = pointer -> classType;
00120         \textcolor{keywordtype}{signed} \textcolor{keywordtype}{char} *stateType = pointer -> state;
00121         \textcolor{keywordtype}{signed} \textcolor{keywordtype}{char} *priority = pointer -> priority;
00122         \textcolor{keywordtype}{char} \textcolor{keyword}{class}[60];
00123         \textcolor{keywordtype}{char} state[60];
00124         
00125         \textcolor{keywordflow}{if}( classType == \hyperlink{mpx__r2_8h_a796bd7c6ba2e59281760fb155c6287e8}{APPLICATION} ) strcpy( \textcolor{keyword}{class}, \textcolor{stringliteral}{"Application"});
00126         \textcolor{keywordflow}{if}( classType == \hyperlink{mpx__r2_8h_a21b97df85e65556468b28a576311271c}{SYSTEM} ) strcpy( \textcolor{keyword}{class}, \textcolor{stringliteral}{"System"} );
00127         
00128         \textcolor{keywordflow}{if}( stateType == \hyperlink{mpx__r2_8h_a6fb7181d994ee98e735494be55809708}{RUNNING} ) strcpy(state,\textcolor{stringliteral}{"Running"});
00129         \textcolor{keywordflow}{if}( stateType == \hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY} ) strcpy( state ,\textcolor{stringliteral}{"Ready"} );
00130         \textcolor{keywordflow}{if}( stateType == \hyperlink{mpx__r2_8h_a48f6457243719e7031768d4100741159}{BLOCKED} ) strcpy( state ,\textcolor{stringliteral}{"Blocked"});
00131         \textcolor{keywordflow}{if}( stateType == \hyperlink{mpx__r2_8h_a07b1141143e8825b04670da23fca8cc7}{SUSPENDED_READY} ) strcpy(state ,\textcolor{stringliteral}{"Suspended Ready"});
00132         \textcolor{keywordflow}{if} ( stateType == \hyperlink{mpx__r2_8h_a6e41bb5a80c5049e8d364bab8ee4d73a}{SUSPENDED_BLOCKED} ) strcpy( state,\textcolor{stringliteral}{"Suspended Blocked"} )
       ;
00133         
00134         
00135     sprintf(&line\_buf,\textcolor{stringliteral}{"Name: %s  Class: %s State: %s Priority: %d "}, name, \textcolor{keyword}{class},
       state,priority); 
00136         
00137         \textcolor{keywordflow}{return} line\_buf;
00138 \}
00139 
\hypertarget{mpx__r2_8c_source_l00141}{}\hyperlink{mpx__r2_8h_aa3b334e3a5afd6e590917667ad359a6f}{00141} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_aa3b334e3a5afd6e590917667ad359a6f}{insert_PCB}(\hyperlink{structprocess}{PCB} *PCBpointer\textcolor{comment}{/*< pointer to a PCB to insert*/} )\{ 
00142    \textcolor{keywordtype}{int} ORD;
00143   
00144    \textcolor{keywordflow}{if} ( PCBpointer -> state == \hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY} || PCBpointer -> state == \hyperlink{mpx__r2_8h_a6fb7181d994ee98e735494be55809708}{RUNNING} )\{
00145                 ORD  = PORDR;
00146         \}
00147         \textcolor{keywordflow}{if}( PCBpointer -> state == \hyperlink{mpx__r2_8h_a48f6457243719e7031768d4100741159}{BLOCKED} || 
00148                 PCBpointer -> state == \hyperlink{mpx__r2_8h_a07b1141143e8825b04670da23fca8cc7}{SUSPENDED_READY} || 
00149                 PCBpointer -> state == \hyperlink{mpx__r2_8h_a6e41bb5a80c5049e8d364bab8ee4d73a}{SUSPENDED_BLOCKED} )\{
00150                 ORD  = FIFO;
00151         \}
00152         
00153    \textcolor{keywordflow}{switch}(ORD)\{
00154                 \textcolor{keywordflow}{case} \hyperlink{mpx__r2_8h_ace032edafb5fe32666cf53a1e7a957e0}{PORDR}:
00155                         \hyperlink{mpx__r2_8c_a722f27bfb24e46ffd7eb86fb34024ed9}{insert_PORDR}(PCBpointer,rQueue);
00156                         \textcolor{keywordflow}{break};
00157                 \textcolor{keywordflow}{case} \hyperlink{mpx__r2_8h_af6bc2702f6a1a4bb063b0726d90999da}{FIFO}:
00158                         \hyperlink{mpx__r2_8c_a58a3e3525ed6385f632835b55ab7d7d1}{insert_FIFO}(PCBpointer,wsQueue);
00159                         \textcolor{keywordflow}{break};
00160                 \textcolor{keywordflow}{default}:
00161                         printf(\textcolor{stringliteral}{"ORDER not Valid"});
00162                         \textcolor{keywordflow}{break};
00163                 \};
00164 \}
\hypertarget{mpx__r2_8c_source_l00166}{}\hyperlink{mpx__r2_8h_a9a582eea14fd6628937fb0891220fa82}{00166} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_a722f27bfb24e46ffd7eb86fb34024ed9}{insert_PORDR}( \hyperlink{structprocess}{PCB} *PCBpointer, \hyperlink{structroot}{ROOT} *queueROOT )\{ \textcolor{comment}{//FIXME: NO ERROR CHECKING
      }
00167         \hyperlink{structpage}{ELEM} *node; \textcolor{comment}{// declare node of type element}
00168         \hyperlink{structpage}{ELEM} *incr;
00169         \hyperlink{structpage}{ELEM} *temp1;
00170         \textcolor{keywordtype}{char} line[MAX\_LINE];
00171         \textcolor{keywordtype}{char} *lp;
00172         lp = &line;
00173         node = sys\_alloc\_mem( \textcolor{keyword}{sizeof}(\hyperlink{structpage}{ELEM})); \textcolor{comment}{// allocate Memory for node}
00174         node -> \hyperlink{structprocess}{process} = PCBpointer;\textcolor{comment}{// add the PCB to the node}
00175         
00176         \textcolor{keywordflow}{if}( queueROOT -> node == NULL )\{ \textcolor{comment}{// if this is the first element ever in 
      the queque}
00177                 node -> left = NULL;
00178                 node -> right = NULL;
00179                 queueROOT -> node = node; \textcolor{comment}{// Set the first element in the queque 
      to node of Type Element}
00180                 queueROOT -> count += 1; \textcolor{comment}{// increase count by one}
00181                 \textcolor{keywordflow}{return}; \textcolor{comment}{//exit out first node is in queque. }
00182         \}
00183         
00184         incr = queueROOT -> node; \textcolor{comment}{//set node to the first node in the queque}
00185         \textcolor{keywordflow}{while} ( incr -> \hyperlink{structprocess}{process} -> priority <= node -> \hyperlink{structprocess}{process} -> priority  )\{ \textcolor{comment}{//
       Process with the lowest priority goes first }
00186                     lp = \hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{string_PCB}(incr->\hyperlink{structpage_af3cc0e1320b79159b230f154f1a95f0d}{process});
00187                         printf(\textcolor{stringliteral}{"%s\(\backslash\)n"},lp);
00188                         \textcolor{keywordflow}{if}( incr->\hyperlink{structpage_a59bb1b5eca2d579befcc93a2833f4dfd}{right} == NULL) \textcolor{keywordflow}{break};
00189                         incr = incr -> right; \textcolor{comment}{// progrees to the right }
00190                         
00191         \}
00192         
00193         \textcolor{comment}{/* There are three cases to check for head, tail, and middle*/}
00194         
00195         \textcolor{comment}{/*head case*/}
00196         \textcolor{keywordflow}{if} ( incr -> left == NULL && incr-> right == NULL)\{
00197                 \textcolor{keywordflow}{if}( incr -> \hyperlink{structprocess}{process} -> priority <= node -> \hyperlink{structprocess}{process} -> priority )\{
      
00198                         node-> left = incr;
00199                         node-> right = NULL;
00200                         incr->\hyperlink{structpage_a59bb1b5eca2d579befcc93a2833f4dfd}{right} = node;
00201                         queueROOT->\hyperlink{structroot_afa78d0408d4af29e936332a04739d59c}{count} +=1;
00202                 \}\textcolor{keywordflow}{else}\{
00203                         node->\hyperlink{structpage_a450d16b8cb803158a4dab05bb36fd7f5}{left} = NULL;
00204                         node->\hyperlink{structpage_a59bb1b5eca2d579befcc93a2833f4dfd}{right} = incr;
00205                         incr->\hyperlink{structpage_a450d16b8cb803158a4dab05bb36fd7f5}{left} = node;
00206                         queueROOT -> node = node; \textcolor{comment}{//set quequeROOT to new head}
00207                         queueROOT ->\hyperlink{structroot_afa78d0408d4af29e936332a04739d59c}{count} +=1;
00208                 \}
00209                 \textcolor{keywordflow}{return};
00210         \}
00211         \textcolor{keywordflow}{if}( incr -> left == NULL && incr->\hyperlink{structpage_a59bb1b5eca2d579befcc93a2833f4dfd}{right} != NULL )\{ 
00212                 node->\hyperlink{structpage_a450d16b8cb803158a4dab05bb36fd7f5}{left} = NULL;
00213                 node->\hyperlink{structpage_a59bb1b5eca2d579befcc93a2833f4dfd}{right} = incr;
00214                 incr->\hyperlink{structpage_a450d16b8cb803158a4dab05bb36fd7f5}{left} = node;
00215                 queueROOT -> node = node; \textcolor{comment}{//set quequeROOT to new head}
00216                 queueROOT ->\hyperlink{structroot_afa78d0408d4af29e936332a04739d59c}{count} +=1;
00217                 \textcolor{keywordflow}{return};
00218         \}
00219         
00220         \textcolor{comment}{/*tail case*/}
00221         \textcolor{keywordflow}{if}( incr -> left != NULL && incr->\hyperlink{structpage_a59bb1b5eca2d579befcc93a2833f4dfd}{right} == NULL )\{
00222                 
00223                 \textcolor{keywordflow}{if}( incr -> \hyperlink{structprocess}{process} -> priority <= node -> \hyperlink{structprocess}{process} -> priority )\{
      
00224                         node-> left = incr;
00225                         node-> right = NULL;
00226                         incr->\hyperlink{structpage_a59bb1b5eca2d579befcc93a2833f4dfd}{right} = node;
00227                         queueROOT->\hyperlink{structroot_afa78d0408d4af29e936332a04739d59c}{count} +=1;
00228                         \textcolor{keywordflow}{return};
00229                 \}\textcolor{keywordflow}{else}\{
00230                         incr = incr -> left; \textcolor{comment}{//decrement incr}
00231                         temp1 = incr -> right;
00232                         incr->\hyperlink{structpage_a59bb1b5eca2d579befcc93a2833f4dfd}{right} = node;
00233                         node->\hyperlink{structpage_a59bb1b5eca2d579befcc93a2833f4dfd}{right} = temp1;
00234                         node->\hyperlink{structpage_a450d16b8cb803158a4dab05bb36fd7f5}{left} = incr;
00235                         temp1->\hyperlink{structpage_a450d16b8cb803158a4dab05bb36fd7f5}{left} = node;
00236                         queueROOT->\hyperlink{structroot_afa78d0408d4af29e936332a04739d59c}{count} +=1;
00237                         \textcolor{keywordflow}{return};
00238                 \}
00239                 
00240         \}
00241         
00242         \textcolor{comment}{/*middle case*/}
00243         \textcolor{keywordflow}{if}( incr -> left != NULL && incr->\hyperlink{structpage_a59bb1b5eca2d579befcc93a2833f4dfd}{right} != NULL)\{
00244                 incr = incr -> left;
00245                 temp1 = incr -> right;
00246                 incr->\hyperlink{structpage_a59bb1b5eca2d579befcc93a2833f4dfd}{right} = node;
00247                 node->\hyperlink{structpage_a59bb1b5eca2d579befcc93a2833f4dfd}{right} = temp1;
00248                 node->\hyperlink{structpage_a450d16b8cb803158a4dab05bb36fd7f5}{left} = incr;
00249                 temp1->\hyperlink{structpage_a450d16b8cb803158a4dab05bb36fd7f5}{left} = node;
00250                 queueROOT->\hyperlink{structroot_afa78d0408d4af29e936332a04739d59c}{count} +=1;
00251                 \textcolor{keywordflow}{return};
00252         \}
00253 \}
\hypertarget{mpx__r2_8c_source_l00255}{}\hyperlink{mpx__r2_8h_a89d5f57a5b157787f44875a8f27a6233}{00255} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_a58a3e3525ed6385f632835b55ab7d7d1}{insert_FIFO}( \hyperlink{structprocess}{PCB} *PCBpointer, \hyperlink{structroot}{ROOT} *queueROOT)\{ \textcolor{comment}{//FIXME: NO ERROR HANDLING}
00256         \hyperlink{structpage}{ELEM} *node; \textcolor{comment}{// declare node of type element}
00257         \hyperlink{structpage}{ELEM} *incr;
00258         
00259         
00260         node = sys\_alloc\_mem( \textcolor{keyword}{sizeof}(\hyperlink{structpage}{ELEM})); \textcolor{comment}{// allocate Memory for node}
00261         node -> \hyperlink{structprocess}{process} = PCBpointer;\textcolor{comment}{// add the PCB to the node}
00262         
00263         \textcolor{keywordflow}{if}( queueROOT -> node == NULL )\{ \textcolor{comment}{// if this is the first element ever in 
      the queque}
00264                 node -> left = NULL; \textcolor{comment}{// set the link left to null}
00265                 node -> right = NULL;\textcolor{comment}{// set the link right to null}
00266                 queueROOT -> node = node; \textcolor{comment}{// Set the first element in the queque 
      to node of Type Element}
00267                 queueROOT -> count += 1; \textcolor{comment}{// increase count by one}
00268                 \textcolor{keywordflow}{return}; \textcolor{comment}{//exit out first node is in queque. }
00269         \}
00270         
00271         
00272         \textcolor{comment}{/* INSERT INTO THE QUEQUE IN FIFO ORDER*/}
00273         incr = queueROOT -> node; \textcolor{comment}{//set node to the first node in the queque}
00274         \textcolor{keywordflow}{while}( incr -> right != NULL )\{
00275                 incr = incr -> right; \textcolor{comment}{// progress forward to the right of the que
      que}
00276         \}
00277          incr -> right = node;
00278          node -> left = incr; \textcolor{comment}{//set left to previous node}
00279          node -> right = NULL; \textcolor{comment}{// set right to null }
00280          queueROOT -> count += 1; \textcolor{comment}{// increase count by one as the size of the que
      que has grown by one}
00281          
00282          \textcolor{keywordflow}{return};
00283 
00284 \}
\hypertarget{mpx__r2_8c_source_l00286}{}\hyperlink{mpx__r2_8h_a612a6abcb66c688a32f33abc93ff3990}{00286} \hyperlink{structprocess}{PCB} *\hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}( \textcolor{keywordtype}{char} *name)\{
00287         \hyperlink{structpage}{ELEM} *incr;
00288         incr =  rQueue -> node; \textcolor{comment}{//set node to the first node in the queque}
00289         \textcolor{keywordflow}{while} ( strcmp(name,incr -> \hyperlink{structprocess}{process} -> name ) != 0 && incr != NULL)\{ \textcolor{comment}{// P
      rocess with the lowest priority goes first }
00290                         incr= incr -> right; \textcolor{comment}{// progrees to the right }
00291         \}
00292         \textcolor{keywordflow}{if} (incr == NULL )\{
00293         incr =  wsQueue -> node; \textcolor{comment}{//set node to the first node in the queque}
00294         \textcolor{keywordflow}{while} ( strcmp(name,incr -> \hyperlink{structprocess}{process} -> name ) != 0 && incr != NULL)\{ \textcolor{comment}{// P
      rocess with the lowest priority goes first }
00295                         incr= incr -> right; \textcolor{comment}{// progrees to the right }
00296         \}
00297         \}
00298         \textcolor{keywordflow}{if} ( incr -> \hyperlink{structprocess}{process} != NULL && incr != NULL )\{
00299                 \textcolor{keywordflow}{return} incr->\hyperlink{structpage_af3cc0e1320b79159b230f154f1a95f0d}{process};
00300         \}\textcolor{keywordflow}{else}\{
00301                 \textcolor{keywordflow}{return} NULL;
00302         \}
00303 
00304 \}
\hypertarget{mpx__r2_8c_source_l00306}{}\hyperlink{mpx__r2_8c_af30a3658210d449b4b53e5be2ed2bc2e}{00306} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_af30a3658210d449b4b53e5be2ed2bc2e}{remove_PCB}( \hyperlink{structprocess}{PCB} *\hyperlink{structprocess}{process} )\{
00307         \hyperlink{structroot}{ROOT} *queue;
00308         \hyperlink{structpage}{ELEM} *incr;
00309         \hyperlink{structpage}{ELEM} *temp1;
00310         \hyperlink{structpage}{ELEM} *temp2;
00311         
00312         \textcolor{keywordflow}{if} ( process -> state == \hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY} || process -> state == \hyperlink{mpx__r2_8h_a6fb7181d994ee98e735494be55809708}{RUNNING} )\{
00313                 queue = rQueue;
00314         \}
00315         \textcolor{keywordflow}{if}( process -> state == \hyperlink{mpx__r2_8h_a48f6457243719e7031768d4100741159}{BLOCKED} || 
00316                 process -> state == \hyperlink{mpx__r2_8h_a07b1141143e8825b04670da23fca8cc7}{SUSPENDED_READY} || 
00317                 process -> state == \hyperlink{mpx__r2_8h_a6e41bb5a80c5049e8d364bab8ee4d73a}{SUSPENDED_BLOCKED} )\{
00318                 queue = wsQueue;
00319         \}
00320         \textcolor{comment}{/* last in queue */}
00321         \textcolor{keywordflow}{if} ( queue -> count == 1 )\{
00322                 incr = queue-> node;
00323                 \hyperlink{mpx__r2_8c_a79890f055b1d0fccf1962bbde4877caa}{free_PCB}(incr->\hyperlink{structpage_af3cc0e1320b79159b230f154f1a95f0d}{process});
00324                 sys\_free\_mem(queue->\hyperlink{structroot_acf8c9d6dbd37a892a1b45394c1595f1a}{node});
00325                 queue -> node = NULL;
00326                 queue -> count -=1;
00327                 
00328                 \textcolor{keywordflow}{return};
00329         \}
00330         incr = queue-> node; \textcolor{comment}{//set node to the first node in the queque}
00331         \textcolor{keywordflow}{while} ( (incr -> process != process ) && incr != NULL )\{ \textcolor{comment}{// find the same
       process}
00332                         incr = incr -> right; \textcolor{comment}{// progrees to the right }
00333         \}
00334         \textcolor{comment}{/* There are three cases to check for head, tail, and middle*/}
00335         
00336         
00337         
00338         \textcolor{comment}{/*head case*/}
00339         \textcolor{keywordflow}{if}( incr -> left == NULL && incr->\hyperlink{structpage_a59bb1b5eca2d579befcc93a2833f4dfd}{right} != NULL )\{ 
00340                 temp1 = incr -> right;
00341                 temp1 -> left  = NULL;
00342                 queue -> node = temp1; \textcolor{comment}{//set queueROOT to new head}
00343                 queue ->\hyperlink{structroot_afa78d0408d4af29e936332a04739d59c}{count} -=1;
00344         \}
00345         
00346         \textcolor{comment}{/*tail case*/}
00347         \textcolor{keywordflow}{if}( incr -> left != NULL && incr->\hyperlink{structpage_a59bb1b5eca2d579befcc93a2833f4dfd}{right} == NULL )\{
00348                 temp1 = incr-> left;
00349                 temp1 -> right  = NULL;
00350                 queue -> count -=1;
00351         \}
00352         
00353         \textcolor{comment}{/*middle case*/}
00354         \textcolor{keywordflow}{if}( incr -> left != NULL && incr->\hyperlink{structpage_a59bb1b5eca2d579befcc93a2833f4dfd}{right} != NULL)\{
00355                 temp1 = incr -> left;
00356                 temp1 -> right = incr -> right;
00357                 temp2 = incr -> right;
00358                 temp2 -> left = incr -> left;
00359                 queue -> count -=1;
00360         \}
00361         \textcolor{comment}{//Deallocate mem}
00362         \hyperlink{mpx__r2_8c_a79890f055b1d0fccf1962bbde4877caa}{free_PCB}(process);
00363         sys\_free\_mem(incr);
00364         
00365         \textcolor{keywordflow}{return};
00366         \}
00367 
\hypertarget{mpx__r2_8c_source_l00369}{}\hyperlink{mpx__r2_8h_a782285c58822e411fb75be1e65fe1104}{00369} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_a782285c58822e411fb75be1e65fe1104}{mpxcmd_create_PCB}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{
00370         \textcolor{keyword}{static} \textcolor{keywordtype}{int} count;
00371         \textcolor{keywordtype}{char} name[STRLEN];
00372         \textcolor{keywordtype}{char} line[MAX\_LINE];
00373         \textcolor{keywordtype}{int} type;
00374         \textcolor{keywordtype}{int} priority;
00375 
00376         \hyperlink{structprocess}{PCB} *newPCB = \hyperlink{mpx__r2_8c_a58a8a1ea0a96b9ecf0be29179a5a0a1e}{allocate_PCB}();
00377         
00378         \textcolor{keywordflow}{if}( count == \hyperlink{mpx__r2_8h_ac328e551bde3d39b6d7b8cc9e048d941}{ZERO} )\{
00379                 rQueue = (\hyperlink{structroot}{ROOT}*) sys\_alloc\_mem(\textcolor{keyword}{sizeof}(\hyperlink{structroot}{ROOT}));
00380                 wsQueue = (\hyperlink{structroot}{ROOT}*) sys\_alloc\_mem(\textcolor{keyword}{sizeof}(\hyperlink{structroot}{ROOT}));
00381         \}
00382         
00383         
00384         printf(\textcolor{stringliteral}{"Process Name: \(\backslash\)n"});
00385         \hyperlink{mpx__util_8c_a781169ab05ad54c0d37253d73060b77f}{mpx_readline}(name, \hyperlink{mpx__r2_8h_a278cf415676752815cfb411cb0b32802}{STRLEN});
00386         printf(\textcolor{stringliteral}{"Process Class Type ( Application 0 or System  1): \(\backslash\)n"} );
00387         type= \hyperlink{mpx__util_8c_aacc3dfe470919b0bd1133bce90383e18}{mpxprompt_int}();
00388         printf(\textcolor{stringliteral}{"Process Priority (-128 to 127): \(\backslash\)n"});
00389         priority = \hyperlink{mpx__util_8c_aacc3dfe470919b0bd1133bce90383e18}{mpxprompt_int}();
00390         
00391         
00392         
00393         \textcolor{keywordflow}{if} ( \hyperlink{mpx__r2_8c_a316c9619aba53c03c17afbc0a0dbf096}{setup_PCB}(newPCB,&name,type,\hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY},priority) == 1)\{
00394                 printf(\textcolor{stringliteral}{"Incrorrect information entered."});
00395                 \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00396                 \textcolor{keywordflow}{return};
00397         \}       
00398         
00399         \hyperlink{mpx__r2_8c_aa3b334e3a5afd6e590917667ad359a6f}{insert_PCB}(newPCB);
00400         count++;\textcolor{comment}{//Update the number of times the function has run.}
00401 \}
00402 
\hypertarget{mpx__r2_8c_source_l00404}{}\hyperlink{mpx__r2_8c_aca3ad02d2b4c68f7653b0adf2c484ff6}{00404} \hyperlink{structprocess}{PCB} *\hyperlink{mpx__r2_8c_aca3ad02d2b4c68f7653b0adf2c484ff6}{copy_PCB}(\hyperlink{structprocess}{PCB} *pointer)\{ 
00405                 \hyperlink{structprocess}{PCB} *tempPCB = \hyperlink{mpx__r2_8c_a58a8a1ea0a96b9ecf0be29179a5a0a1e}{allocate_PCB}();
00406                 memcpy(tempPCB,pointer,\textcolor{keyword}{sizeof}(\hyperlink{structprocess}{PCB}));
00407                 memcpy(tempPCB -> memdsc, pointer -> memdsc , \textcolor{keyword}{sizeof}(\hyperlink{structmem}{MEMDSC}));
00408                 memcpy(tempPCB -> stackdsc ,pointer -> stackdsc, \textcolor{keyword}{sizeof}(\hyperlink{structstack}{STACKDSC})
      );
00409         \textcolor{keywordflow}{return} tempPCB;
00410 \}
\hypertarget{mpx__r2_8c_source_l00412}{}\hyperlink{mpx__r2_8h_ae6d6afa9fefa158029528a24841c453a}{00412} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_ae6d6afa9fefa158029528a24841c453a}{mpxcmd_delete_PCB}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{
00413         \textcolor{keywordflow}{if} (argc == 2)\{
00414         \textcolor{keywordtype}{char} name[STRLEN];
00415         \hyperlink{structprocess}{PCB} *pointer;
00416         strcpy(name,argv[1]);
00417         
00418         pointer = \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}(name);
00419         
00420         \textcolor{keywordflow}{if} ( pointer != NULL)\{
00421                 \hyperlink{mpx__r2_8c_af30a3658210d449b4b53e5be2ed2bc2e}{remove_PCB}(pointer);
00422         \}\textcolor{keywordflow}{else}\{
00423                 printf(\textcolor{stringliteral}{"Process Name not found!"});
00424                 \textcolor{keywordflow}{return};
00425         \}
00426         \}
00427 \}
00428 
\hypertarget{mpx__r2_8c_source_l00430}{}\hyperlink{mpx__r2_8h_ae8eb72663ecff92c27ab06e3560fd0d4}{00430} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_ae8eb72663ecff92c27ab06e3560fd0d4}{mpxcmd_block}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{
00431         \textcolor{keywordflow}{if}(argc==2)\{
00432                 \textcolor{keywordtype}{char} name[STRLEN];
00433                 
00434                 \hyperlink{structprocess}{PCB} *pointer;
00435                 \hyperlink{structprocess}{PCB} *tempPCB;
00436                 \textcolor{keywordtype}{int} buffs = STRLEN;
00437                 
00438                 strcpy(name,argv[1]);
00439                 
00440                 pointer = \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}(name);
00441                 \textcolor{keywordflow}{if} ( pointer != NULL)\{
00442                         tempPCB = \hyperlink{mpx__r2_8c_aca3ad02d2b4c68f7653b0adf2c484ff6}{copy_PCB}(pointer);
00443                         \hyperlink{mpx__r2_8c_af30a3658210d449b4b53e5be2ed2bc2e}{remove_PCB}(pointer);
00444                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY} || tempPCB -> state == 
      \hyperlink{mpx__r2_8h_a6fb7181d994ee98e735494be55809708}{RUNNING} ) tempPCB -> state = BLOCKED;
00445                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_a07b1141143e8825b04670da23fca8cc7}{SUSPENDED_READY} ) tempPCB -> stat
      e = SUSPENDED\_BLOCKED;
00446                         \hyperlink{mpx__r2_8c_aa3b334e3a5afd6e590917667ad359a6f}{insert_PCB}(tempPCB);
00447                 \}\textcolor{keywordflow}{else}\{
00448                         printf(\textcolor{stringliteral}{"Process Name not found!"});
00449                         \textcolor{keywordflow}{return};
00450                 \}
00451         \}
00452         \textcolor{keywordflow}{else}\{
00453                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});       
00454                 \textcolor{keywordflow}{return};
00455         \}       
00456 \}
00457 
\hypertarget{mpx__r2_8c_source_l00459}{}\hyperlink{mpx__r2_8h_a1363a7b6156a84057936c3fd91d91f69}{00459} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_a1363a7b6156a84057936c3fd91d91f69}{mpxcmd_unblock}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{
00460         \textcolor{keywordflow}{if}(argc==2)\{
00461                 \textcolor{keywordtype}{char} name[STRLEN];
00462                 \hyperlink{structprocess}{PCB} *pointer;
00463                 \hyperlink{structprocess}{PCB} *tempPCB;
00464                 \textcolor{keywordtype}{int} buffs = STRLEN;
00465                 
00466                 strcpy(name,argv[1]);
00467                 
00468                 pointer = \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}(name);
00469                 \textcolor{keywordflow}{if} ( pointer != NULL)\{
00470                         tempPCB = \hyperlink{mpx__r2_8c_aca3ad02d2b4c68f7653b0adf2c484ff6}{copy_PCB}(pointer);
00471                         \hyperlink{mpx__r2_8c_af30a3658210d449b4b53e5be2ed2bc2e}{remove_PCB}(pointer);
00472                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_a48f6457243719e7031768d4100741159}{BLOCKED} ) tempPCB -> state = READ
      Y;
00473                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_a6e41bb5a80c5049e8d364bab8ee4d73a}{SUSPENDED_BLOCKED} ) tempPCB -> st
      ate = SUSPENDED\_READY;
00474                         \hyperlink{mpx__r2_8c_aa3b334e3a5afd6e590917667ad359a6f}{insert_PCB}(tempPCB);
00475                 \}\textcolor{keywordflow}{else}\{
00476                         printf(\textcolor{stringliteral}{"Process Name not found!"});
00477                         \textcolor{keywordflow}{return};
00478                 \}
00479         \}
00480         \textcolor{keywordflow}{else}\{
00481                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});       
00482                 \textcolor{keywordflow}{return};
00483         \}
00484 \}
00485 
\hypertarget{mpx__r2_8c_source_l00487}{}\hyperlink{mpx__r2_8h_a697f0f432dba18606d9e514eda9cd073}{00487} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_a697f0f432dba18606d9e514eda9cd073}{mpxcmd_suspend}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{
00488         \textcolor{keywordflow}{if}(argc==2)\{
00489                 \textcolor{keywordtype}{char} name[STRLEN];
00490                 \hyperlink{structprocess}{PCB} *pointer;
00491                 \hyperlink{structprocess}{PCB} *tempPCB;
00492                 \textcolor{keywordtype}{int} buffs = STRLEN;
00493                 strcpy(name,argv[1]);
00494                 
00495                 pointer = \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}(name);
00496                 \textcolor{keywordflow}{if} ( pointer != NULL)\{
00497                         tempPCB = \hyperlink{mpx__r2_8c_aca3ad02d2b4c68f7653b0adf2c484ff6}{copy_PCB}(pointer);
00498                         \hyperlink{mpx__r2_8c_af30a3658210d449b4b53e5be2ed2bc2e}{remove_PCB}(pointer);
00499                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY} || tempPCB -> state == 
      \hyperlink{mpx__r2_8h_a6fb7181d994ee98e735494be55809708}{RUNNING} ) tempPCB -> state = SUSPENDED\_READY;
00500                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_a48f6457243719e7031768d4100741159}{BLOCKED} ) tempPCB -> state = SUSP
      ENDED\_BLOCKED;
00501                         \hyperlink{mpx__r2_8c_aa3b334e3a5afd6e590917667ad359a6f}{insert_PCB}(tempPCB);
00502                 \}\textcolor{keywordflow}{else}\{
00503                         printf(\textcolor{stringliteral}{"Process Name not found!"});
00504                         \textcolor{keywordflow}{return};
00505                 \}
00506         \}
00507         \textcolor{keywordflow}{else}\{
00508                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});       
00509                 \textcolor{keywordflow}{return};
00510         \}
00511 \}
00512 
\hypertarget{mpx__r2_8c_source_l00514}{}\hyperlink{mpx__r2_8h_a3c47daf087934d234d896e35e4c03f3b}{00514} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_a3c47daf087934d234d896e35e4c03f3b}{mpxcmd_resume}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{
00515         \textcolor{keywordflow}{if}(argc==2)\{
00516                 \textcolor{keywordtype}{char} name[STRLEN];
00517                 \hyperlink{structprocess}{PCB} *pointer;
00518                 \hyperlink{structprocess}{PCB} *tempPCB;
00519                 \textcolor{keywordtype}{int} buffs = STRLEN;
00520                 
00521                 strcpy(name,argv[1]);
00522                 
00523                 pointer = \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}(name);
00524                 \textcolor{keywordflow}{if} ( pointer != NULL)\{
00525                         tempPCB = \hyperlink{mpx__r2_8c_aca3ad02d2b4c68f7653b0adf2c484ff6}{copy_PCB}(pointer);
00526                         \hyperlink{mpx__r2_8c_af30a3658210d449b4b53e5be2ed2bc2e}{remove_PCB}(pointer);
00527                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_a07b1141143e8825b04670da23fca8cc7}{SUSPENDED_READY} ) tempPCB -> stat
      e = READY;
00528                         \textcolor{keywordflow}{if}( tempPCB -> state == \hyperlink{mpx__r2_8h_a6e41bb5a80c5049e8d364bab8ee4d73a}{SUSPENDED_BLOCKED} ) tempPCB -> st
      ate = BLOCKED;
00529                         \hyperlink{mpx__r2_8c_aa3b334e3a5afd6e590917667ad359a6f}{insert_PCB}(tempPCB);
00530                 \}\textcolor{keywordflow}{else}\{
00531                         printf(\textcolor{stringliteral}{"Process Name not found!"});
00532                         \textcolor{keywordflow}{return};
00533                 \}
00534         \}
00535         \textcolor{keywordflow}{else}\{
00536                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});       
00537                 \textcolor{keywordflow}{return};
00538         \}
00539 \}
00540 
\hypertarget{mpx__r2_8c_source_l00542}{}\hyperlink{mpx__r2_8h_a4505a685b9ab69940541dc4e973e0f01}{00542} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_a4505a685b9ab69940541dc4e973e0f01}{mpxcmd_setPriority}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{ 
00543         \textcolor{keywordflow}{if}(argc==3)\{
00544                 \textcolor{keywordtype}{char} name[STRLEN];
00545                 \hyperlink{structprocess}{PCB} *pointer;
00546                 \textcolor{keywordtype}{int} priority;
00547                 \hyperlink{structprocess}{PCB} *tempPCB;
00548                 \textcolor{keywordtype}{int} buffs = STRLEN;
00549                 priority  = atoi(argv[2]);
00550                 strcpy(name,argv[1]);
00551                 \textcolor{keywordflow}{if}( priority <= 128 || priority >= -127)\{ ;\}\textcolor{keywordflow}{else}\{
00552                         printf(\textcolor{stringliteral}{"Number entered out of range!"});
00553                         \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00554                         \textcolor{keywordflow}{return};
00555                 \}
00556                 pointer = \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}(name);
00557                 \textcolor{keywordflow}{if} ( pointer != NULL)\{
00558                         pointer -> priority = priority;
00559                         \textcolor{keywordflow}{if}( pointer -> state == \hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY} )\{
00560                                         tempPCB = \hyperlink{mpx__r2_8c_aca3ad02d2b4c68f7653b0adf2c484ff6}{copy_PCB}(pointer);
00561                                         \hyperlink{mpx__r2_8c_af30a3658210d449b4b53e5be2ed2bc2e}{remove_PCB}(pointer);
00562                                         \hyperlink{mpx__r2_8c_aa3b334e3a5afd6e590917667ad359a6f}{insert_PCB}(tempPCB);
00563                                         \}
00564                 \}\textcolor{keywordflow}{else}\{
00565                         printf(\textcolor{stringliteral}{"Process Name not found!"});
00566                         \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00567                         \textcolor{keywordflow}{return};
00568                 \}
00569         \}
00570         \textcolor{keywordflow}{else}\{
00571                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});
00572                 \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00573                 \textcolor{keywordflow}{return};
00574         \}
00575 \}
00576 
00577 
\hypertarget{mpx__r2_8c_source_l00579}{}\hyperlink{mpx__r2_8h_ae52d77243725636a3b23d05235fee141}{00579} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_ae52d77243725636a3b23d05235fee141}{mpxcmd_show_PCB}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{
00580         \textcolor{keywordflow}{if}(argc==2)\{
00581                 \textcolor{keywordtype}{char} name[STRLEN];
00582                 \hyperlink{structprocess}{PCB} *pointer;
00583                 \textcolor{keywordtype}{char} \textcolor{keyword}{class}[30];
00584                 \textcolor{keywordtype}{char} state[45];
00585                 \textcolor{keywordtype}{int} buffs = STRLEN;
00586                 \textcolor{keywordtype}{char} line[MAX\_LINE];
00587                 \textcolor{keywordtype}{char}* lp;
00588                 lp = &line;
00589                 
00590                 strcpy(name,argv[1]);
00591                 
00592                 pointer = \hyperlink{mpx__r2_8c_a612a6abcb66c688a32f33abc93ff3990}{find_PCB}(name);
00593                 
00594                 \textcolor{keywordflow}{if} ( pointer != NULL)\{
00595                         printf(\textcolor{stringliteral}{"%s\(\backslash\)n"},\hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{string_PCB}(pointer));  
00596                         \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00597                 \}\textcolor{keywordflow}{else}\{
00598                         printf(\textcolor{stringliteral}{"Process Name not found!"});
00599                         \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00600                         \textcolor{keywordflow}{return};
00601                 \}
00602         \}
00603         \textcolor{keywordflow}{else}\{
00604                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});
00605                 \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00606                 \textcolor{keywordflow}{return};
00607         \}
00608 \}
00609 
\hypertarget{mpx__r2_8c_source_l00611}{}\hyperlink{mpx__r2_8h_a69559f93fe1b569abf6e846a426191a9}{00611} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_a69559f93fe1b569abf6e846a426191a9}{mpxcmd_showAll_PCB}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{ \textcolor{comment}{// Pagination function needs add
      ed !!Function still needs work!!}
00612         \textcolor{keywordflow}{if}(argc==1)\{
00613                 \hyperlink{structpage}{ELEM} *incr;
00614                 \hyperlink{structprocess}{PCB} *pointer;
00615                 \textcolor{keywordtype}{char} line[MAX\_LINE];
00616                 \textcolor{keywordtype}{char}* lp;
00617                 \textcolor{keywordtype}{char} \textcolor{keyword}{class}[30];
00618                 \textcolor{keywordtype}{char} state[45];
00619                 \textcolor{comment}{//set node to the first node in the queque}
00620                 lp = &line;
00621                 \hyperlink{mpx__util_8c_a60afdb7496b6ff469c6b98d2ecde15ed}{mpx_pager_init}(\textcolor{stringliteral}{" All PCB's In Queue:\(\backslash\)n --------------------------
      ---------------------------\(\backslash\)n"});
00622                 
00623                 printf(\textcolor{stringliteral}{"%d"}, rQueue -> count);
00624                 \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00625                 \textcolor{keywordflow}{if}( rQueue -> count > 0 )\{
00626                 incr = rQueue -> node;
00627                 \textcolor{keywordflow}{while}( incr != NULL )\{
00628                         
00629                         pointer = incr -> \hyperlink{structprocess}{process};
00630                 
00631                         lp = \hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{string_PCB}(pointer);
00632                         \hyperlink{mpx__util_8c_a9e59881f10bd91d7255f18f205e101e6}{mpx_pager}(lp);
00633                         
00634                         incr = incr -> right; \textcolor{comment}{// progress forward to the right of
       the queque}
00635                 \}
00636             \} 
00637                 printf(\textcolor{stringliteral}{"%d"}, wsQueue -> count);
00638                 \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00639                 \textcolor{keywordflow}{if}(wsQueue -> count > 0)\{
00640                 incr = wsQueue -> node;
00641                 \textcolor{keywordflow}{while}( incr != NULL )\{
00642                         pointer = incr -> \hyperlink{structprocess}{process};
00643                 
00644                         
00645                         lp = \hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{string_PCB}(pointer);
00646                         \hyperlink{mpx__util_8c_a9e59881f10bd91d7255f18f205e101e6}{mpx_pager}(lp);
00647                         
00648                         incr = incr -> right; \textcolor{comment}{// progress forward to the right of
       the queque}
00649                 \}
00650                 \}
00651         \}
00652         \textcolor{keywordflow}{else}\{
00653                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});       
00654                 \textcolor{keywordflow}{return};
00655         \}
00656         \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00657 \}
00658 
\hypertarget{mpx__r2_8c_source_l00660}{}\hyperlink{mpx__r2_8h_aeaac6d37294f767e31c3789971c5ecd4}{00660} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_aeaac6d37294f767e31c3789971c5ecd4}{mpxcmd_showReady_PCB}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{ \textcolor{comment}{// Pagination function needs a
      dded !!Function still needs work!!}
00661         \textcolor{keywordflow}{if}(argc==1)\{
00662                 \hyperlink{structpage}{ELEM} *incr;
00663                 \hyperlink{structprocess}{PCB} *pointer;
00664                 \textcolor{keywordtype}{char} line[MAX\_LINE];
00665                 \textcolor{keywordtype}{char}* lp;
00666                 \textcolor{keywordtype}{char} \textcolor{keyword}{class}[30];
00667                 \textcolor{keywordtype}{char} state[45];
00668                 incr = rQueue -> node;\textcolor{comment}{//set node to the first node in the queque}
00669                 lp = &line;
00670                 \hyperlink{mpx__util_8c_a60afdb7496b6ff469c6b98d2ecde15ed}{mpx_pager_init}(\textcolor{stringliteral}{" All PCB's Ready State in Queues:\(\backslash\)n -------------
      ----------------------------------------\(\backslash\)n"});
00671                 \textcolor{keywordflow}{while}( incr != NULL )\{
00672                         
00673                         pointer = incr -> \hyperlink{structprocess}{process};
00674                         \textcolor{keywordflow}{if} ( pointer -> state == \hyperlink{mpx__r2_8h_ad1235d5ce36f7267285e82dccd428aa6}{READY})\{
00675                         lp = \hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{string_PCB}(pointer);
00676                         \hyperlink{mpx__util_8c_a9e59881f10bd91d7255f18f205e101e6}{mpx_pager}(lp);
00677                         \}
00678                         incr = incr -> right; \textcolor{comment}{// progress forward to the right of
       the queque}
00679                 \}
00680                 
00681                 incr = wsQueue -> node;\textcolor{comment}{//set node to the first node in the queque
      }
00682                 \textcolor{keywordflow}{while}( incr != NULL )\{
00683                         pointer = incr -> \hyperlink{structprocess}{process};
00684                         \textcolor{keywordflow}{if} ( pointer -> state == \hyperlink{mpx__r2_8h_a07b1141143e8825b04670da23fca8cc7}{SUSPENDED_READY})\{
00685                         lp = \hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{string_PCB}(pointer);
00686                         \hyperlink{mpx__util_8c_a9e59881f10bd91d7255f18f205e101e6}{mpx_pager}(lp);
00687                         \}
00688                         incr = incr -> right; \textcolor{comment}{// progress forward to the right of
       the queque                     incr = incr -> right; // progress forward to the 
      right of the queque}
00689                 \}
00690         \}
00691         \textcolor{keywordflow}{else}\{
00692                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});       
00693                 \textcolor{keywordflow}{return};
00694         \}
00695         \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00696 \}
00697 
\hypertarget{mpx__r2_8c_source_l00699}{}\hyperlink{mpx__r2_8h_ae1ef92a5e3a8869ec269a23b3b854c9b}{00699} \textcolor{keywordtype}{void} \hyperlink{mpx__r2_8c_ae1ef92a5e3a8869ec269a23b3b854c9b}{mpxcmd_showBlocked_PCB}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])\{ \textcolor{comment}{// Pagination function needs
       added !!Function still needs work!!}
00700         \textcolor{keywordflow}{if}(argc==1)\{
00701                 \hyperlink{structpage}{ELEM} *incr;
00702                 \hyperlink{structprocess}{PCB} *pointer;
00703                 \textcolor{keywordtype}{char} line[MAX\_LINE];
00704                 \textcolor{keywordtype}{char}* lp;
00705                 \textcolor{keywordtype}{char} \textcolor{keyword}{class}[30];
00706                 \textcolor{keywordtype}{char} state[45];
00707                 lp = &line;
00708                 \hyperlink{mpx__util_8c_a60afdb7496b6ff469c6b98d2ecde15ed}{mpx_pager_init}(\textcolor{stringliteral}{" All PCB's Blocked State in Queues:\(\backslash\)n -----------
      ------------------------------------------\(\backslash\)n"});
00709                 
00710                 incr = wsQueue -> node;\textcolor{comment}{//set node to the first node in the queque
      }
00711                 \textcolor{keywordflow}{while}( incr  != NULL )\{
00712                         pointer = incr -> \hyperlink{structprocess}{process};
00713                         \textcolor{keywordflow}{if} ( pointer -> state == \hyperlink{mpx__r2_8h_a6e41bb5a80c5049e8d364bab8ee4d73a}{SUSPENDED_BLOCKED} || pointer -> 
      state == \hyperlink{mpx__r2_8h_a48f6457243719e7031768d4100741159}{BLOCKED} )\{
00714                         lp = \hyperlink{mpx__r2_8c_aa1ebf78ebfc66e910acd6efdcf6b2437}{string_PCB}(pointer);
00715                         \hyperlink{mpx__util_8c_a9e59881f10bd91d7255f18f205e101e6}{mpx_pager}(lp);
00716                         \}
00717                         incr = incr -> right; \textcolor{comment}{// progress forward to the right of
       the queque                     incr = incr -> right; // progress forward to the 
      right of the queque}
00718                 \}
00719         \}
00720         \textcolor{keywordflow}{else}\{
00721                 printf(\textcolor{stringliteral}{"Wrong number of arguments used"});       
00722                 \textcolor{keywordflow}{return};
00723         \}
00724         \hyperlink{mpx__util_8c_a338d01dfe3c80732c00450203c85b964}{mpxprompt_anykey}();
00725 \}       
00726 
00727 
\end{DoxyCode}
